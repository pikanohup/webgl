!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t,r){
/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */
e.exports=function(){"use strict";for(var e=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e<t?t:e>r?r:e},t={},r=0,n=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];r<n.length;r+=1){var o=n[r];t["[object "+o+"]"]=o.toLowerCase()}var a=function(e){return t[Object.prototype.toString.call(e)]||"object"},i=Math.PI,u={clip_rgb:function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var r=0;r<=3;r++)r<3?((t[r]<0||t[r]>255)&&(t._clipped=!0),t[r]=e(t[r],0,255)):3===r&&(t[r]=e(t[r],0,1));return t},limit:e,type:a,unpack:function(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==a(e[0])&&t?t.split("").filter((function(t){return void 0!==e[0][t]})).map((function(t){return e[0][t]})):e[0]},last:function(e){if(e.length<2)return null;var t=e.length-1;return"string"==a(e[t])?e[t].toLowerCase():null},PI:i,TWOPI:2*i,PITHIRD:i/3,DEG2RAD:i/180,RAD2DEG:180/i},f={format:{},autodetect:[]},c=u.last,l=u.clip_rgb,s=u.type,d=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=this;if("object"===s(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var n=c(e),o=!1;if(!n){o=!0,f.sorted||(f.autodetect=f.autodetect.sort((function(e,t){return t.p-e.p})),f.sorted=!0);for(var a=0,i=f.autodetect;a<i.length;a+=1){var u=i[a];if(n=u.test.apply(u,e))break}}if(!f.format[n])throw new Error("unknown format: "+e);var d=f.format[n].apply(null,o?e:e.slice(0,-1));r._rgb=l(d),3===r._rgb.length&&r._rgb.push(1)};d.prototype.toString=function(){return"function"==s(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var p=d,h=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h.Color,[null].concat(e)))};h.Color=p,h.version="2.1.0";var b=h,m=u.unpack,y=Math.max,g=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=m(e,"rgb"),n=r[0],o=r[1],a=r[2],i=1-y(n/=255,y(o/=255,a/=255)),u=i<1?1/(1-i):0,f=(1-n-i)*u,c=(1-o-i)*u,l=(1-a-i)*u;return[f,c,l,i]},v=u.unpack,E=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=v(e,"cmyk"))[0],n=e[1],o=e[2],a=e[3],i=e.length>4?e[4]:1;return 1===a?[0,0,0,i]:[r>=1?0:255*(1-r)*(1-a),n>=1?0:255*(1-n)*(1-a),o>=1?0:255*(1-o)*(1-a),i]},_=u.unpack,A=u.type;p.prototype.cmyk=function(){return g(this._rgb)},b.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["cmyk"])))},f.format.cmyk=E,f.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=_(e,"cmyk"),"array"===A(e)&&4===e.length)return"cmyk"}});var T=u.unpack,x=u.last,w=function(e){return Math.round(100*e)/100},R=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=T(e,"hsla"),n=x(e)||"lsa";return r[0]=w(r[0]||0),r[1]=w(100*r[1])+"%",r[2]=w(100*r[2])+"%","hsla"===n||r.length>3&&r[3]<1?(r[3]=r.length>3?r[3]:1,n="hsla"):r.length=3,n+"("+r.join(",")+")"},P=u.unpack,F=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=P(e,"rgba"))[0],n=e[1],o=e[2];r/=255,n/=255,o/=255;var a,i,u=Math.min(r,n,o),f=Math.max(r,n,o),c=(f+u)/2;return f===u?(a=0,i=Number.NaN):a=c<.5?(f-u)/(f+u):(f-u)/(2-f-u),r==f?i=(n-o)/(f-u):n==f?i=2+(o-r)/(f-u):o==f&&(i=4+(r-n)/(f-u)),(i*=60)<0&&(i+=360),e.length>3&&void 0!==e[3]?[i,a,c,e[3]]:[i,a,c]},U=u.unpack,I=u.last,M=Math.round,S=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=U(e,"rgba"),n=I(e)||"rgb";return"hsl"==n.substr(0,3)?R(F(r),n):(r[0]=M(r[0]),r[1]=M(r[1]),r[2]=M(r[2]),("rgba"===n||r.length>3&&r[3]<1)&&(r[3]=r.length>3?r[3]:1,n="rgba"),n+"("+r.slice(0,"rgb"===n?3:4).join(",")+")")},C=u.unpack,N=Math.round,k=function(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];var n,o,a,i=(t=C(t,"hsl"))[0],u=t[1],f=t[2];if(0===u)n=o=a=255*f;else{var c=[0,0,0],l=[0,0,0],s=f<.5?f*(1+u):f+u-f*u,d=2*f-s,p=i/360;c[0]=p+1/3,c[1]=p,c[2]=p-1/3;for(var h=0;h<3;h++)c[h]<0&&(c[h]+=1),c[h]>1&&(c[h]-=1),6*c[h]<1?l[h]=d+6*(s-d)*c[h]:2*c[h]<1?l[h]=s:3*c[h]<2?l[h]=d+(s-d)*(2/3-c[h])*6:l[h]=d;n=(e=[N(255*l[0]),N(255*l[1]),N(255*l[2])])[0],o=e[1],a=e[2]}return t.length>3?[n,o,a,t[3]]:[n,o,a,1]},B=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,O=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,L=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,z=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,D=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,G=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,X=Math.round,j=function(e){var t;if(e=e.toLowerCase().trim(),f.format.named)try{return f.format.named(e)}catch(e){}if(t=e.match(B)){for(var r=t.slice(1,4),n=0;n<3;n++)r[n]=+r[n];return r[3]=1,r}if(t=e.match(O)){for(var o=t.slice(1,5),a=0;a<4;a++)o[a]=+o[a];return o}if(t=e.match(L)){for(var i=t.slice(1,4),u=0;u<3;u++)i[u]=X(2.55*i[u]);return i[3]=1,i}if(t=e.match(z)){for(var c=t.slice(1,5),l=0;l<3;l++)c[l]=X(2.55*c[l]);return c[3]=+c[3],c}if(t=e.match(D)){var s=t.slice(1,4);s[1]*=.01,s[2]*=.01;var d=k(s);return d[3]=1,d}if(t=e.match(G)){var p=t.slice(1,4);p[1]*=.01,p[2]*=.01;var h=k(p);return h[3]=+t[4],h}};j.test=function(e){return B.test(e)||O.test(e)||L.test(e)||z.test(e)||D.test(e)||G.test(e)};var Y=j,V=u.type;p.prototype.css=function(e){return S(this._rgb,e)},b.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["css"])))},f.format.css=Y,f.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&"string"===V(e)&&Y.test(e))return"css"}});var K=u.unpack;f.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=K(e,"rgba");return r[0]*=255,r[1]*=255,r[2]*=255,r},b.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["gl"])))},p.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var W=u.unpack,H=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n=W(e,"rgb"),o=n[0],a=n[1],i=n[2],u=Math.min(o,a,i),f=Math.max(o,a,i),c=f-u,l=100*c/255,s=u/(255-c)*100;return 0===c?r=Number.NaN:(o===f&&(r=(a-i)/c),a===f&&(r=2+(i-o)/c),i===f&&(r=4+(o-a)/c),(r*=60)<0&&(r+=360)),[r,l,s]},q=u.unpack,$=Math.floor,Z=function(){for(var e,t,r,n,o,a,i=[],u=arguments.length;u--;)i[u]=arguments[u];var f,c,l,s=(i=q(i,"hcg"))[0],d=i[1],p=i[2];p*=255;var h=255*d;if(0===d)f=c=l=p;else{360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360);var b=$(s/=60),m=s-b,y=p*(1-d),g=y+h*(1-m),v=y+h*m,E=y+h;switch(b){case 0:f=(e=[E,v,y])[0],c=e[1],l=e[2];break;case 1:f=(t=[g,E,y])[0],c=t[1],l=t[2];break;case 2:f=(r=[y,E,v])[0],c=r[1],l=r[2];break;case 3:f=(n=[y,g,E])[0],c=n[1],l=n[2];break;case 4:f=(o=[v,y,E])[0],c=o[1],l=o[2];break;case 5:f=(a=[E,y,g])[0],c=a[1],l=a[2]}}return[f,c,l,i.length>3?i[3]:1]},J=u.unpack,Q=u.type;p.prototype.hcg=function(){return H(this._rgb)},b.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hcg"])))},f.format.hcg=Z,f.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=J(e,"hcg"),"array"===Q(e)&&3===e.length)return"hcg"}});var ee=u.unpack,te=u.last,re=Math.round,ne=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ee(e,"rgba"),n=r[0],o=r[1],a=r[2],i=r[3],u=te(e)||"auto";void 0===i&&(i=1),"auto"===u&&(u=i<1?"rgba":"rgb");var f=(n=re(n))<<16|(o=re(o))<<8|(a=re(a)),c="000000"+f.toString(16);c=c.substr(c.length-6);var l="0"+re(255*i).toString(16);switch(l=l.substr(l.length-2),u.toLowerCase()){case"rgba":return"#"+c+l;case"argb":return"#"+l+c;default:return"#"+c}},oe=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ae=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,ie=function(e){if(e.match(oe)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(ae)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var r=parseInt(e,16);return[r>>24&255,r>>16&255,r>>8&255,Math.round((255&r)/255*100)/100]}throw new Error("unknown hex color: "+e)},ue=u.type;p.prototype.hex=function(e){return ne(this._rgb,e)},b.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hex"])))},f.format.hex=ie,f.autodetect.push({p:4,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&"string"===ue(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var fe=u.unpack,ce=u.TWOPI,le=Math.min,se=Math.sqrt,de=Math.acos,pe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n=fe(e,"rgb"),o=n[0],a=n[1],i=n[2],u=le(o/=255,a/=255,i/=255),f=(o+a+i)/3,c=f>0?1-u/f:0;return 0===c?r=NaN:(r=(o-a+(o-i))/2,r/=se((o-a)*(o-a)+(o-i)*(a-i)),r=de(r),i>a&&(r=ce-r),r/=ce),[360*r,c,f]},he=u.unpack,be=u.limit,me=u.TWOPI,ye=u.PITHIRD,ge=Math.cos,ve=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n,o,a=(e=he(e,"hsi"))[0],i=e[1],u=e[2];return isNaN(a)&&(a=0),isNaN(i)&&(i=0),a>360&&(a-=360),a<0&&(a+=360),(a/=360)<1/3?n=1-((o=(1-i)/3)+(r=(1+i*ge(me*a)/ge(ye-me*a))/3)):a<2/3?o=1-((r=(1-i)/3)+(n=(1+i*ge(me*(a-=1/3))/ge(ye-me*a))/3)):r=1-((n=(1-i)/3)+(o=(1+i*ge(me*(a-=2/3))/ge(ye-me*a))/3)),[255*(r=be(u*r*3)),255*(n=be(u*n*3)),255*(o=be(u*o*3)),e.length>3?e[3]:1]},Ee=u.unpack,_e=u.type;p.prototype.hsi=function(){return pe(this._rgb)},b.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hsi"])))},f.format.hsi=ve,f.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ee(e,"hsi"),"array"===_e(e)&&3===e.length)return"hsi"}});var Ae=u.unpack,Te=u.type;p.prototype.hsl=function(){return F(this._rgb)},b.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hsl"])))},f.format.hsl=k,f.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ae(e,"hsl"),"array"===Te(e)&&3===e.length)return"hsl"}});var xe=u.unpack,we=Math.min,Re=Math.max,Pe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n,o,a=(e=xe(e,"rgb"))[0],i=e[1],u=e[2],f=we(a,i,u),c=Re(a,i,u),l=c-f;return o=c/255,0===c?(r=Number.NaN,n=0):(n=l/c,a===c&&(r=(i-u)/l),i===c&&(r=2+(u-a)/l),u===c&&(r=4+(a-i)/l),(r*=60)<0&&(r+=360)),[r,n,o]},Fe=u.unpack,Ue=Math.floor,Ie=function(){for(var e,t,r,n,o,a,i=[],u=arguments.length;u--;)i[u]=arguments[u];var f,c,l,s=(i=Fe(i,"hsv"))[0],d=i[1],p=i[2];if(p*=255,0===d)f=c=l=p;else{360===s&&(s=0),s>360&&(s-=360),s<0&&(s+=360);var h=Ue(s/=60),b=s-h,m=p*(1-d),y=p*(1-d*b),g=p*(1-d*(1-b));switch(h){case 0:f=(e=[p,g,m])[0],c=e[1],l=e[2];break;case 1:f=(t=[y,p,m])[0],c=t[1],l=t[2];break;case 2:f=(r=[m,p,g])[0],c=r[1],l=r[2];break;case 3:f=(n=[m,y,p])[0],c=n[1],l=n[2];break;case 4:f=(o=[g,m,p])[0],c=o[1],l=o[2];break;case 5:f=(a=[p,m,y])[0],c=a[1],l=a[2]}}return[f,c,l,i.length>3?i[3]:1]},Me=u.unpack,Se=u.type;p.prototype.hsv=function(){return Pe(this._rgb)},b.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hsv"])))},f.format.hsv=Ie,f.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Me(e,"hsv"),"array"===Se(e)&&3===e.length)return"hsv"}});var Ce=18,Ne=.95047,ke=1,Be=1.08883,Oe=.137931034,Le=.206896552,ze=.12841855,De=.008856452,Ge=u.unpack,Xe=Math.pow,je=function(e){return(e/=255)<=.04045?e/12.92:Xe((e+.055)/1.055,2.4)},Ye=function(e){return e>De?Xe(e,1/3):e/ze+Oe},Ve=function(e,t,r){return e=je(e),t=je(t),r=je(r),[Ye((.4124564*e+.3575761*t+.1804375*r)/Ne),Ye((.2126729*e+.7151522*t+.072175*r)/ke),Ye((.0193339*e+.119192*t+.9503041*r)/Be)]},Ke=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Ge(e,"rgb"),n=r[0],o=r[1],a=r[2],i=Ve(n,o,a),u=i[0],f=i[1],c=i[2],l=116*f-16;return[l<0?0:l,500*(u-f),200*(f-c)]},We=u.unpack,He=Math.pow,qe=function(e){return 255*(e<=.00304?12.92*e:1.055*He(e,1/2.4)-.055)},$e=function(e){return e>Le?e*e*e:ze*(e-Oe)},Ze=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n,o,a=(e=We(e,"lab"))[0],i=e[1],u=e[2];return n=(a+16)/116,r=isNaN(i)?n:n+i/500,o=isNaN(u)?n:n-u/200,n=ke*$e(n),r=Ne*$e(r),o=Be*$e(o),[qe(3.2404542*r-1.5371385*n-.4985314*o),qe(-.969266*r+1.8760108*n+.041556*o),qe(.0556434*r-.2040259*n+1.0572252*o),e.length>3?e[3]:1]},Je=u.unpack,Qe=u.type;p.prototype.lab=function(){return Ke(this._rgb)},b.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["lab"])))},f.format.lab=Ze,f.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Je(e,"lab"),"array"===Qe(e)&&3===e.length)return"lab"}});var et=u.unpack,tt=u.RAD2DEG,rt=Math.sqrt,nt=Math.atan2,ot=Math.round,at=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=et(e,"lab"),n=r[0],o=r[1],a=r[2],i=rt(o*o+a*a),u=(nt(a,o)*tt+360)%360;return 0===ot(1e4*i)&&(u=Number.NaN),[n,i,u]},it=u.unpack,ut=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=it(e,"rgb"),n=r[0],o=r[1],a=r[2],i=Ke(n,o,a),u=i[0],f=i[1],c=i[2];return at(u,f,c)},ft=u.unpack,ct=u.DEG2RAD,lt=Math.sin,st=Math.cos,dt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ft(e,"lch"),n=r[0],o=r[1],a=r[2];return isNaN(a)&&(a=0),[n,st(a*=ct)*o,lt(a)*o]},pt=u.unpack,ht=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=pt(e,"lch"))[0],n=e[1],o=e[2],a=dt(r,n,o),i=a[0],u=a[1],f=a[2],c=Ze(i,u,f),l=c[0],s=c[1],d=c[2];return[l,s,d,e.length>3?e[3]:1]},bt=u.unpack,mt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=bt(e,"hcl").reverse();return ht.apply(void 0,r)},yt=u.unpack,gt=u.type;p.prototype.lch=function(){return ut(this._rgb)},p.prototype.hcl=function(){return ut(this._rgb).reverse()},b.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["lch"])))},b.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hcl"])))},f.format.lch=ht,f.format.hcl=mt,["lch","hcl"].forEach((function(e){return f.autodetect.push({p:2,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=yt(t,e),"array"===gt(t)&&3===t.length)return e}})}));var vt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Et=u.type;p.prototype.name=function(){for(var e=ne(this._rgb,"rgb"),t=0,r=Object.keys(vt);t<r.length;t+=1){var n=r[t];if(vt[n]===e)return n.toLowerCase()}return e},f.format.named=function(e){if(e=e.toLowerCase(),vt[e])return ie(vt[e]);throw new Error("unknown color name: "+e)},f.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&"string"===Et(e)&&vt[e.toLowerCase()])return"named"}});var _t=u.unpack,At=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=_t(e,"rgb"),n=r[0],o=r[1],a=r[2];return(n<<16)+(o<<8)+a},Tt=u.type,xt=function(e){if("number"==Tt(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)},wt=u.type;p.prototype.num=function(){return At(this._rgb)},b.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["num"])))},f.format.num=xt,f.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===wt(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var Rt=u.unpack,Pt=u.type,Ft=Math.round;p.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Ft)},p.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map((function(t,r){return r<3?!1===e?t:Ft(t):t}))},b.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["rgb"])))},f.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Rt(e,"rgba");return void 0===r[3]&&(r[3]=1),r},f.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Rt(e,"rgba"),"array"===Pt(e)&&(3===e.length||4===e.length&&"number"==Pt(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var Ut=Math.log,It=function(e){var t,r,n,o=e/100;return o<66?(t=255,r=-155.25485562709179-.44596950469579133*(r=o-2)+104.49216199393888*Ut(r),n=o<20?0:.8274096064007395*(n=o-10)-254.76935184120902+115.67994401066147*Ut(n)):(t=351.97690566805693+.114206453784165*(t=o-55)-40.25366309332127*Ut(t),r=325.4494125711974+.07943456536662342*(r=o-50)-28.0852963507957*Ut(r),n=255),[t,r,n,1]},Mt=u.unpack,St=Math.round,Ct=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var r,n=Mt(e,"rgb"),o=n[0],a=n[2],i=1e3,u=4e4,f=.4;u-i>f;){var c=It(r=.5*(u+i));c[2]/c[0]>=a/o?u=r:i=r}return St(r)};p.prototype.temp=p.prototype.kelvin=p.prototype.temperature=function(){return Ct(this._rgb)},b.temp=b.kelvin=b.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["temp"])))},f.format.temp=f.format.kelvin=f.format.temperature=It;var Nt=u.type;p.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===Nt(e)?t?(this._rgb[3]=e,this):new p([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},p.prototype.clipped=function(){return this._rgb._clipped||!1},p.prototype.darken=function(e){void 0===e&&(e=1);var t=this.lab();return t[0]-=Ce*e,new p(t,"lab").alpha(this.alpha(),!0)},p.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},p.prototype.darker=p.prototype.darken,p.prototype.brighter=p.prototype.brighten,p.prototype.get=function(e){var t=e.split("."),r=t[0],n=t[1],o=this[r]();if(n){var a=r.indexOf(n);if(a>-1)return o[a];throw new Error("unknown channel "+n+" in mode "+r)}return o};var kt=u.type,Bt=Math.pow;p.prototype.luminance=function(e){if(void 0!==e&&"number"===kt(e)){if(0===e)return new p([0,0,0,this._rgb[3]],"rgb");if(1===e)return new p([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),r=20,n=function(t,o){var a=t.interpolate(o,.5,"rgb"),i=a.luminance();return Math.abs(e-i)<1e-7||!r--?a:i>e?n(t,a):n(a,o)},o=(t>e?n(new p([0,0,0]),this):n(this,new p([255,255,255]))).rgb();return new p(o.concat([this._rgb[3]]))}return Ot.apply(void 0,this._rgb.slice(0,3))};var Ot=function(e,t,r){return.2126*(e=Lt(e))+.7152*(t=Lt(t))+.0722*(r=Lt(r))},Lt=function(e){return(e/=255)<=.03928?e/12.92:Bt((e+.055)/1.055,2.4)},zt={},Dt=u.type,Gt=function(e,t,r){void 0===r&&(r=.5);for(var n=[],o=arguments.length-3;o-- >0;)n[o]=arguments[o+3];var a=n[0]||"lrgb";if(zt[a]||n.length||(a=Object.keys(zt)[0]),!zt[a])throw new Error("interpolation mode "+a+" is not defined");return"object"!==Dt(e)&&(e=new p(e)),"object"!==Dt(t)&&(t=new p(t)),zt[a](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))};p.prototype.mix=p.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return Gt.apply(void 0,[this,e,t].concat(r))},p.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new p([t[0]*r,t[1]*r,t[2]*r,r],"rgb")},p.prototype.saturate=function(e){void 0===e&&(e=1);var t=this.lch();return t[1]+=Ce*e,t[1]<0&&(t[1]=0),new p(t,"lch").alpha(this.alpha(),!0)},p.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var Xt=u.type;p.prototype.set=function(e,t,r){void 0===r&&(r=!1);var n=e.split("."),o=n[0],a=n[1],i=this[o]();if(a){var u=o.indexOf(a);if(u>-1){if("string"==Xt(t))switch(t.charAt(0)){case"+":case"-":i[u]+=+t;break;case"*":i[u]*=+t.substr(1);break;case"/":i[u]/=+t.substr(1);break;default:i[u]=+t}else{if("number"!==Xt(t))throw new Error("unsupported value for Color.set");i[u]=t}var f=new p(i,o);return r?(this._rgb=f._rgb,this):f}throw new Error("unknown channel "+a+" in mode "+o)}return i},zt.rgb=function(e,t,r){var n=e._rgb,o=t._rgb;return new p(n[0]+r*(o[0]-n[0]),n[1]+r*(o[1]-n[1]),n[2]+r*(o[2]-n[2]),"rgb")};var jt=Math.sqrt,Yt=Math.pow;zt.lrgb=function(e,t,r){var n=e._rgb,o=n[0],a=n[1],i=n[2],u=t._rgb,f=u[0],c=u[1],l=u[2];return new p(jt(Yt(o,2)*(1-r)+Yt(f,2)*r),jt(Yt(a,2)*(1-r)+Yt(c,2)*r),jt(Yt(i,2)*(1-r)+Yt(l,2)*r),"rgb")},zt.lab=function(e,t,r){var n=e.lab(),o=t.lab();return new p(n[0]+r*(o[0]-n[0]),n[1]+r*(o[1]-n[1]),n[2]+r*(o[2]-n[2]),"lab")};var Vt=function(e,t,r,n){var o,a,i,u,f,c,l,s,d,h,b,m;return"hsl"===n?(i=e.hsl(),u=t.hsl()):"hsv"===n?(i=e.hsv(),u=t.hsv()):"hcg"===n?(i=e.hcg(),u=t.hcg()):"hsi"===n?(i=e.hsi(),u=t.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",i=e.hcl(),u=t.hcl()),"h"===n.substr(0,1)&&(f=(o=i)[0],l=o[1],d=o[2],c=(a=u)[0],s=a[1],h=a[2]),isNaN(f)||isNaN(c)?isNaN(f)?isNaN(c)?m=Number.NaN:(m=c,1!=d&&0!=d||"hsv"==n||(b=s)):(m=f,1!=h&&0!=h||"hsv"==n||(b=l)):m=f+r*(c>f&&c-f>180?c-(f+360):c<f&&f-c>180?c+360-f:c-f),void 0===b&&(b=l+r*(s-l)),new p([m,b,d+r*(h-d)],n)},Kt=function(e,t,r){return Vt(e,t,r,"lch")};zt.lch=Kt,zt.hcl=Kt,zt.num=function(e,t,r){var n=e.num(),o=t.num();return new p(n+r*(o-n),"num")},zt.hcg=function(e,t,r){return Vt(e,t,r,"hcg")},zt.hsi=function(e,t,r){return Vt(e,t,r,"hsi")},zt.hsl=function(e,t,r){return Vt(e,t,r,"hsl")},zt.hsv=function(e,t,r){return Vt(e,t,r,"hsv")};var Wt=u.clip_rgb,Ht=Math.pow,qt=Math.sqrt,$t=Math.PI,Zt=Math.cos,Jt=Math.sin,Qt=Math.atan2,er=function(e,t){for(var r=e.length,n=[0,0,0,0],o=0;o<e.length;o++){var a=e[o],i=t[o]/r,u=a._rgb;n[0]+=Ht(u[0],2)*i,n[1]+=Ht(u[1],2)*i,n[2]+=Ht(u[2],2)*i,n[3]+=u[3]*i}return n[0]=qt(n[0]),n[1]=qt(n[1]),n[2]=qt(n[2]),n[3]>.9999999&&(n[3]=1),new p(Wt(n))},tr=u.type,rr=Math.pow,nr=function(e){var t="rgb",r=b("#ccc"),n=0,o=[0,1],a=[],i=[0,0],u=!1,f=[],c=!1,l=0,s=1,d=!1,p={},h=!0,m=1,y=function(e){if((e=e||["#fff","#000"])&&"string"===tr(e)&&b.brewer&&b.brewer[e.toLowerCase()]&&(e=b.brewer[e.toLowerCase()]),"array"===tr(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=b(e[t]);a.length=0;for(var r=0;r<e.length;r++)a.push(r/(e.length-1))}return _(),f=e},g=function(e){return e},v=function(e){return e},E=function(e,n){var o,c;if(null==n&&(n=!1),isNaN(e)||null===e)return r;c=n?e:u&&u.length>2?function(e){if(null!=u){for(var t=u.length-1,r=0;r<t&&e>=u[r];)r++;return r-1}return 0}(e)/(u.length-2):s!==l?(e-l)/(s-l):1,c=v(c),n||(c=g(c)),1!==m&&(c=rr(c,m)),c=i[0]+c*(1-i[0]-i[1]),c=Math.min(1,Math.max(0,c));var d=Math.floor(1e4*c);if(h&&p[d])o=p[d];else{if("array"===tr(f))for(var y=0;y<a.length;y++){var E=a[y];if(c<=E){o=f[y];break}if(c>=E&&y===a.length-1){o=f[y];break}if(c>E&&c<a[y+1]){c=(c-E)/(a[y+1]-E),o=b.interpolate(f[y],f[y+1],c,t);break}}else"function"===tr(f)&&(o=f(c));h&&(p[d]=o)}return o},_=function(){return p={}};y(e);var A=function(e){var t=b(E(e));return c&&t[c]?t[c]():t};return A.classes=function(e){if(null!=e){if("array"===tr(e))u=e,o=[e[0],e[e.length-1]];else{var t=b.analyze(o);u=0===e?[t.min,t.max]:b.limits(t,"e",e)}return A}return u},A.domain=function(e){if(!arguments.length)return o;l=e[0],s=e[e.length-1],a=[];var t=f.length;if(e.length===t&&l!==s)for(var r=0,n=Array.from(e);r<n.length;r+=1){var i=n[r];a.push((i-l)/(s-l))}else{for(var u=0;u<t;u++)a.push(u/(t-1));if(e.length>2){var c=e.map((function(t,r){return r/(e.length-1)})),d=e.map((function(e){return(e-l)/(s-l)}));d.every((function(e,t){return c[t]===e}))||(v=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=d[t+1];)t++;var r=(e-d[t])/(d[t+1]-d[t]);return c[t]+r*(c[t+1]-c[t])})}}return o=[l,s],A},A.mode=function(e){return arguments.length?(t=e,_(),A):t},A.range=function(e,t){return y(e),A},A.out=function(e){return c=e,A},A.spread=function(e){return arguments.length?(n=e,A):n},A.correctLightness=function(e){return null==e&&(e=!0),d=e,_(),g=d?function(e){for(var t=E(0,!0).lab()[0],r=E(1,!0).lab()[0],n=t>r,o=E(e,!0).lab()[0],a=t+(r-t)*e,i=o-a,u=0,f=1,c=20;Math.abs(i)>.01&&c-- >0;)n&&(i*=-1),i<0?(u=e,e+=.5*(f-e)):(f=e,e+=.5*(u-e)),o=E(e,!0).lab()[0],i=o-a;return e}:function(e){return e},A},A.padding=function(e){return null!=e?("number"===tr(e)&&(e=[e,e]),i=e,A):i},A.colors=function(t,r){arguments.length<2&&(r="hex");var n=[];if(0===arguments.length)n=f.slice(0);else if(1===t)n=[A(.5)];else if(t>1){var a=o[0],i=o[1]-a;n=or(0,t,!1).map((function(e){return A(a+e/(t-1)*i)}))}else{e=[];var c=[];if(u&&u.length>2)for(var l=1,s=u.length,d=1<=s;d?l<s:l>s;d?l++:l--)c.push(.5*(u[l-1]+u[l]));else c=o;n=c.map((function(e){return A(e)}))}return b[r]&&(n=n.map((function(e){return e[r]()}))),n},A.cache=function(e){return null!=e?(h=e,A):h},A.gamma=function(e){return null!=e?(m=e,A):m},A.nodata=function(e){return null!=e?(r=b(e),A):r},A};function or(e,t,r){for(var n=[],o=e<t,a=r?o?t+1:t-1:t,i=e;o?i<a:i>a;o?i++:i--)n.push(i);return n}var ar=function(e){var t,r,n,o,a,i,u;if(2===(e=e.map((function(e){return new p(e)}))).length)t=e.map((function(e){return e.lab()})),a=t[0],i=t[1],o=function(e){var t=[0,1,2].map((function(t){return a[t]+e*(i[t]-a[t])}));return new p(t,"lab")};else if(3===e.length)r=e.map((function(e){return e.lab()})),a=r[0],i=r[1],u=r[2],o=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*a[t]+2*(1-e)*e*i[t]+e*e*u[t]}));return new p(t,"lab")};else if(4===e.length){var f;n=e.map((function(e){return e.lab()})),a=n[0],i=n[1],u=n[2],f=n[3],o=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*(1-e)*a[t]+3*(1-e)*(1-e)*e*i[t]+3*(1-e)*e*e*u[t]+e*e*e*f[t]}));return new p(t,"lab")}}else if(5===e.length){var c=ar(e.slice(0,3)),l=ar(e.slice(2,5));o=function(e){return e<.5?c(2*e):l(2*(e-.5))}}return o},ir=function(e,t,r){if(!ir[r])throw new Error("unknown blend mode "+r);return ir[r](e,t)},ur=function(e){return function(t,r){var n=b(r).rgb(),o=b(t).rgb();return b.rgb(e(n,o))}},fr=function(e){return function(t,r){var n=[];return n[0]=e(t[0],r[0]),n[1]=e(t[1],r[1]),n[2]=e(t[2],r[2]),n}};ir.normal=ur(fr((function(e){return e}))),ir.multiply=ur(fr((function(e,t){return e*t/255}))),ir.screen=ur(fr((function(e,t){return 255*(1-(1-e/255)*(1-t/255))}))),ir.overlay=ur(fr((function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))}))),ir.darken=ur(fr((function(e,t){return e>t?t:e}))),ir.lighten=ur(fr((function(e,t){return e>t?e:t}))),ir.dodge=ur(fr((function(e,t){return 255===e?255:(e=t/255*255/(1-e/255))>255?255:e}))),ir.burn=ur(fr((function(e,t){return 255*(1-(1-t/255)/(e/255))})));for(var cr=ir,lr=u.type,sr=u.clip_rgb,dr=u.TWOPI,pr=Math.pow,hr=Math.sin,br=Math.cos,mr=Math.floor,yr=Math.random,gr=Math.log,vr=Math.pow,Er=Math.floor,_r=Math.abs,Ar=function(e,t){void 0===t&&(t=null);var r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===a(e)&&(e=Object.values(e)),e.forEach((function(e){t&&"object"===a(e)&&(e=e[t]),null==e||isNaN(e)||(r.values.push(e),r.sum+=e,e<r.min&&(r.min=e),e>r.max&&(r.max=e),r.count+=1)})),r.domain=[r.min,r.max],r.limits=function(e,t){return Tr(r,e,t)},r},Tr=function(e,t,r){void 0===t&&(t="equal"),void 0===r&&(r=7),"array"==a(e)&&(e=Ar(e));var n=e.min,o=e.max,i=e.values.sort((function(e,t){return e-t}));if(1===r)return[n,o];var u=[];if("c"===t.substr(0,1)&&(u.push(n),u.push(o)),"e"===t.substr(0,1)){u.push(n);for(var f=1;f<r;f++)u.push(n+f/r*(o-n));u.push(o)}else if("l"===t.substr(0,1)){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");var c=Math.LOG10E*gr(n),l=Math.LOG10E*gr(o);u.push(n);for(var s=1;s<r;s++)u.push(vr(10,c+s/r*(l-c)));u.push(o)}else if("q"===t.substr(0,1)){u.push(n);for(var d=1;d<r;d++){var p=(i.length-1)*d/r,h=Er(p);if(h===p)u.push(i[h]);else{var b=p-h;u.push(i[h]*(1-b)+i[h+1]*b)}}u.push(o)}else if("k"===t.substr(0,1)){var m,y=i.length,g=new Array(y),v=new Array(r),E=!0,_=0,A=null;(A=[]).push(n);for(var T=1;T<r;T++)A.push(n+T/r*(o-n));for(A.push(o);E;){for(var x=0;x<r;x++)v[x]=0;for(var w=0;w<y;w++)for(var R=i[w],P=Number.MAX_VALUE,F=void 0,U=0;U<r;U++){var I=_r(A[U]-R);I<P&&(P=I,F=U),v[F]++,g[w]=F}for(var M=new Array(r),S=0;S<r;S++)M[S]=null;for(var C=0;C<y;C++)null===M[m=g[C]]?M[m]=i[C]:M[m]+=i[C];for(var N=0;N<r;N++)M[N]*=1/v[N];E=!1;for(var k=0;k<r;k++)if(M[k]!==A[k]){E=!0;break}A=M,++_>200&&(E=!1)}for(var B={},O=0;O<r;O++)B[O]=[];for(var L=0;L<y;L++)B[m=g[L]].push(i[L]);for(var z=[],D=0;D<r;D++)z.push(B[D][0]),z.push(B[D][B[D].length-1]);z=z.sort((function(e,t){return e-t})),u.push(z[0]);for(var G=1;G<z.length;G+=2){var X=z[G];isNaN(X)||-1!==u.indexOf(X)||u.push(X)}}return u},xr={analyze:Ar,limits:Tr},wr=Math.sqrt,Rr=Math.atan2,Pr=Math.abs,Fr=Math.cos,Ur=Math.PI,Ir={cool:function(){return nr([b.hsl(180,1,.9),b.hsl(250,.7,.4)])},hot:function(){return nr(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Mr={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Sr=0,Cr=Object.keys(Mr);Sr<Cr.length;Sr+=1){var Nr=Cr[Sr];Mr[Nr.toLowerCase()]=Mr[Nr]}var kr=Mr;return b.average=function(e,t,r){void 0===t&&(t="lrgb"),void 0===r&&(r=null);var n=e.length;r||(r=Array.from(new Array(n)).map((function(){return 1})));var o=n/r.reduce((function(e,t){return e+t}));if(r.forEach((function(e,t){r[t]*=o})),e=e.map((function(e){return new p(e)})),"lrgb"===t)return er(e,r);for(var a=e.shift(),i=a.get(t),u=[],f=0,c=0,l=0;l<i.length;l++)if(i[l]=(i[l]||0)*r[0],u.push(isNaN(i[l])?0:r[0]),"h"===t.charAt(l)&&!isNaN(i[l])){var s=i[l]/180*$t;f+=Zt(s)*r[0],c+=Jt(s)*r[0]}var d=a.alpha()*r[0];e.forEach((function(e,n){var o=e.get(t);d+=e.alpha()*r[n+1];for(var a=0;a<i.length;a++)if(!isNaN(o[a]))if(u[a]+=r[n+1],"h"===t.charAt(a)){var l=o[a]/180*$t;f+=Zt(l)*r[n+1],c+=Jt(l)*r[n+1]}else i[a]+=o[a]*r[n+1]}));for(var h=0;h<i.length;h++)if("h"===t.charAt(h)){for(var b=Qt(c/u[h],f/u[h])/$t*180;b<0;)b+=360;for(;b>=360;)b-=360;i[h]=b}else i[h]=i[h]/u[h];return d/=n,new p(i,t).alpha(d>.99999?1:d,!0)},b.bezier=function(e){var t=ar(e);return t.scale=function(){return nr(t)},t},b.blend=cr,b.cubehelix=function(e,t,r,n,o){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===r&&(r=1),void 0===n&&(n=1),void 0===o&&(o=[0,1]);var a,i=0;"array"===lr(o)?a=o[1]-o[0]:(a=0,o=[o,o]);var u=function(u){var f=dr*((e+120)/360+t*u),c=pr(o[0]+a*u,n),l=(0!==i?r[0]+u*i:r)*c*(1-c)/2,s=br(f),d=hr(f);return b(sr([255*(c+l*(-.14861*s+1.78277*d)),255*(c+l*(-.29227*s-.90649*d)),255*(c+l*(1.97294*s)),1]))};return u.start=function(t){return null==t?e:(e=t,u)},u.rotations=function(e){return null==e?t:(t=e,u)},u.gamma=function(e){return null==e?n:(n=e,u)},u.hue=function(e){return null==e?r:("array"===lr(r=e)?0==(i=r[1]-r[0])&&(r=r[1]):i=0,u)},u.lightness=function(e){return null==e?o:("array"===lr(e)?(o=e,a=e[1]-e[0]):(o=[e,e],a=0),u)},u.scale=function(){return b.scale(u)},u.hue(r),u},b.mix=b.interpolate=Gt,b.random=function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef".charAt(mr(16*yr()));return new p(e,"hex")},b.scale=nr,b.analyze=xr.analyze,b.contrast=function(e,t){e=new p(e),t=new p(t);var r=e.luminance(),n=t.luminance();return r>n?(r+.05)/(n+.05):(n+.05)/(r+.05)},b.deltaE=function(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=1),e=new p(e),t=new p(t);for(var o=Array.from(e.lab()),a=o[0],i=o[1],u=o[2],f=Array.from(t.lab()),c=f[0],l=f[1],s=f[2],d=wr(i*i+u*u),h=wr(l*l+s*s),b=a<16?.511:.040975*a/(1+.01765*a),m=.0638*d/(1+.0131*d)+.638,y=d<1e-6?0:180*Rr(u,i)/Ur;y<0;)y+=360;for(;y>=360;)y-=360;var g=y>=164&&y<=345?.56+Pr(.2*Fr(Ur*(y+168)/180)):.36+Pr(.4*Fr(Ur*(y+35)/180)),v=d*d*d*d,E=wr(v/(v+1900)),_=m*(E*g+1-E),A=d-h,T=i-l,x=u-s,w=(a-c)/(r*b),R=A/(n*m);return wr(w*w+R*R+(T*T+x*x-A*A)/(_*_))},b.distance=function(e,t,r){void 0===r&&(r="lab"),e=new p(e),t=new p(t);var n=e.get(r),o=t.get(r),a=0;for(var i in n){var u=(n[i]||0)-(o[i]||0);a+=u*u}return Math.sqrt(a)},b.limits=xr.limits,b.valid=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(p,[null].concat(e))),!0}catch(e){return!1}},b.scales=Ir,b.colors=vt,b.brewer=kr,b}()},function(e,t,r){var n=r(2);"string"==typeof n&&(n=[[e.i,n,""]]);var o={insert:"head",singleton:!1};r(4)(n,o);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(3)(!1)).push([e.i,"html, body {\n  margin: 0;\n  padding: 0;\n}\n\n#canvas {\n  height: 100%;\n  width: 100%;\n  display: block;\n}",""])},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var o=(i=n,u=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),f="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(u),"/*# ".concat(f," */")),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot).concat(e," */")}));return[r].concat(a).concat([o]).join("\n")}var i,u,f;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(r,"}"):r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var a=this[o][0];null!=a&&(n[a]=!0)}for(var i=0;i<e.length;i++){var u=e[i];null!=u[0]&&n[u[0]]||(r&&!u[2]?u[2]=r:r&&(u[2]="(".concat(u[2],") and (").concat(r,")")),t.push(u))}},t}},function(e,t,r){"use strict";var n,o={},a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}();function u(e,t){for(var r=[],n={},o=0;o<e.length;o++){var a=e[o],i=t.base?a[0]+t.base:a[0],u={css:a[1],media:a[2],sourceMap:a[3]};n[i]?n[i].parts.push(u):r.push(n[i]={id:i,parts:[u]})}return r}function f(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=o[n.id],i=0;if(a){for(a.refs++;i<a.parts.length;i++)a.parts[i](n.parts[i]);for(;i<n.parts.length;i++)a.parts.push(m(n.parts[i],t))}else{for(var u=[];i<n.parts.length;i++)u.push(m(n.parts[i],t));o[n.id]={id:n.id,refs:1,parts:u}}}}function c(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var n=r.nc;n&&(e.attributes.nonce=n)}if(Object.keys(e.attributes).forEach((function(r){t.setAttribute(r,e.attributes[r])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,s=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=s(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function p(e,t,r){var n=r.css,o=r.media,a=r.sourceMap;if(o&&e.setAttribute("media",o),a&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var h=null,b=0;function m(e,t){var r,n,o;if(t.singleton){var a=b++;r=h||(h=c(t)),n=d.bind(null,r,a,!1),o=d.bind(null,r,a,!0)}else r=c(t),n=p.bind(null,r,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a());var r=u(e,t);return f(r,t),function(e){for(var n=[],a=0;a<r.length;a++){var i=r[a],c=o[i.id];c&&(c.refs--,n.push(c))}e&&f(u(e,t),t);for(var l=0;l<n.length;l++){var s=n[l];if(0===s.refs){for(var d=0;d<s.parts.length;d++)s.parts[d]();delete o[s.id]}}}}},function(e,t,r){"use strict";r.r(t);r(1);
/* @license twgl.js 4.13.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let n=Float32Array;function o(e,t,r){const o=new n(3);return e&&(o[0]=e),t&&(o[1]=t),r&&(o[2]=r),o}function a(e,t,r){return(r=r||new n(3))[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function i(e,t,r){return(r=r||new n(3))[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function u(e,t,r){r=r||new n(3);const o=e[2]*t[0]-e[0]*t[2],a=e[0]*t[1]-e[1]*t[0];return r[0]=e[1]*t[2]-e[2]*t[1],r[1]=o,r[2]=a,r}function f(e,t){t=t||new n(3);const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],o=Math.sqrt(r);return o>1e-5?(t[0]=e[0]/o,t[1]=e[1]/o,t[2]=e[2]/o):(t[0]=0,t[1]=0,t[2]=0),t}function c(e,t,r){return(r=r||new n(3))[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r}let l=Float32Array;function s(e,t){return(t=t||new l(16))[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function d(e){return(e=e||new l(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function p(e,t){t=t||new l(16);const r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],f=e[6],c=e[7],s=e[8],d=e[9],p=e[10],h=e[11],b=e[12],m=e[13],y=e[14],g=e[15],v=p*g,E=y*h,_=f*g,A=y*c,T=f*h,x=p*c,w=o*g,R=y*a,P=o*h,F=p*a,U=o*c,I=f*a,M=s*m,S=b*d,C=i*m,N=b*u,k=i*d,B=s*u,O=r*m,L=b*n,z=r*d,D=s*n,G=r*u,X=i*n,j=v*u+A*d+T*m-(E*u+_*d+x*m),Y=E*n+w*d+F*m-(v*n+R*d+P*m),V=_*n+R*u+U*m-(A*n+w*u+I*m),K=x*n+P*u+I*d-(T*n+F*u+U*d),W=1/(r*j+i*Y+s*V+b*K);return t[0]=W*j,t[1]=W*Y,t[2]=W*V,t[3]=W*K,t[4]=W*(E*i+_*s+x*b-(v*i+A*s+T*b)),t[5]=W*(v*r+R*s+P*b-(E*r+w*s+F*b)),t[6]=W*(A*r+w*i+I*b-(_*r+R*i+U*b)),t[7]=W*(T*r+F*i+U*s-(x*r+P*i+I*s)),t[8]=W*(M*c+N*h+k*g-(S*c+C*h+B*g)),t[9]=W*(S*a+O*h+D*g-(M*a+L*h+z*g)),t[10]=W*(C*a+L*c+G*g-(N*a+O*c+X*g)),t[11]=W*(B*a+z*c+X*h-(k*a+D*c+G*h)),t[12]=W*(C*p+B*y+S*f-(k*y+M*f+N*p)),t[13]=W*(z*y+M*o+L*p-(O*p+D*y+S*o)),t[14]=W*(O*f+X*y+N*o-(G*y+C*o+L*f)),t[15]=W*(G*p+k*o+D*f-(z*f+X*p+B*o)),t}function h(e,t,r){r=r||o();const n=t[0],a=t[1],i=t[2],u=n*e[3]+a*e[7]+i*e[11]+e[15];return r[0]=(n*e[0]+a*e[4]+i*e[8]+e[12])/u,r[1]=(n*e[1]+a*e[5]+i*e[9]+e[13])/u,r[2]=(n*e[2]+a*e[6]+i*e[10]+e[14])/u,r}function b(e,t,r){r=r||o();const n=t[0],a=t[1],i=t[2];return r[0]=n*e[0]+a*e[4]+i*e[8],r[1]=n*e[1]+a*e[5]+i*e[9],r[2]=n*e[2]+a*e[6]+i*e[10],r}var m=Object.freeze({__proto__:null,axisRotate:function(e,t,r,n){n=n||new l(16);let o=t[0],a=t[1],i=t[2];const u=Math.sqrt(o*o+a*a+i*i),f=(o/=u)*o,c=(a/=u)*a,s=(i/=u)*i,d=Math.cos(r),p=Math.sin(r),h=1-d,b=f+(1-f)*d,m=o*a*h+i*p,y=o*i*h-a*p,g=o*a*h-i*p,v=c+(1-c)*d,E=a*i*h+o*p,_=o*i*h+a*p,A=a*i*h-o*p,T=s+(1-s)*d,x=e[0],w=e[1],R=e[2],P=e[3],F=e[4],U=e[5],I=e[6],M=e[7],S=e[8],C=e[9],N=e[10],k=e[11];return n[0]=b*x+m*F+y*S,n[1]=b*w+m*U+y*C,n[2]=b*R+m*I+y*N,n[3]=b*P+m*M+y*k,n[4]=g*x+v*F+E*S,n[5]=g*w+v*U+E*C,n[6]=g*R+v*I+E*N,n[7]=g*P+v*M+E*k,n[8]=_*x+A*F+T*S,n[9]=_*w+A*U+T*C,n[10]=_*R+A*I+T*N,n[11]=_*P+A*M+T*k,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n},axisRotation:function(e,t,r){r=r||new l(16);let n=e[0],o=e[1],a=e[2];const i=Math.sqrt(n*n+o*o+a*a),u=(n/=i)*n,f=(o/=i)*o,c=(a/=i)*a,s=Math.cos(t),d=Math.sin(t),p=1-s;return r[0]=u+(1-u)*s,r[1]=n*o*p+a*d,r[2]=n*a*p-o*d,r[3]=0,r[4]=n*o*p-a*d,r[5]=f+(1-f)*s,r[6]=o*a*p+n*d,r[7]=0,r[8]=n*a*p+o*d,r[9]=o*a*p-n*d,r[10]=c+(1-c)*s,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},copy:s,frustum:function(e,t,r,n,o,a,i){const u=t-e,f=n-r,c=o-a;return(i=i||new l(16))[0]=2*o/u,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2*o/f,i[6]=0,i[7]=0,i[8]=(e+t)/u,i[9]=(n+r)/f,i[10]=a/c,i[11]=-1,i[12]=0,i[13]=0,i[14]=o*a/c,i[15]=0,i},getAxis:function(e,t,r){const n=4*t;return(r=r||o())[0]=e[n+0],r[1]=e[n+1],r[2]=e[n+2],r},getTranslation:function(e,t){return(t=t||o())[0]=e[12],t[1]=e[13],t[2]=e[14],t},identity:d,inverse:p,lookAt:function(e,t,r,n){n=n||new l(16);const a=o(),c=o(),s=o();return f(i(e,t,s),s),f(u(r,s,a),a),f(u(s,a,c),c),n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=0,n[4]=c[0],n[5]=c[1],n[6]=c[2],n[7]=0,n[8]=s[0],n[9]=s[1],n[10]=s[2],n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},multiply:function(e,t,r){r=r||new l(16);const n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],d=e[8],p=e[9],h=e[10],b=e[11],m=e[12],y=e[13],g=e[14],v=e[15],E=t[0],_=t[1],A=t[2],T=t[3],x=t[4],w=t[5],R=t[6],P=t[7],F=t[8],U=t[9],I=t[10],M=t[11],S=t[12],C=t[13],N=t[14],k=t[15];return r[0]=n*E+u*_+d*A+m*T,r[1]=o*E+f*_+p*A+y*T,r[2]=a*E+c*_+h*A+g*T,r[3]=i*E+s*_+b*A+v*T,r[4]=n*x+u*w+d*R+m*P,r[5]=o*x+f*w+p*R+y*P,r[6]=a*x+c*w+h*R+g*P,r[7]=i*x+s*w+b*R+v*P,r[8]=n*F+u*U+d*I+m*M,r[9]=o*F+f*U+p*I+y*M,r[10]=a*F+c*U+h*I+g*M,r[11]=i*F+s*U+b*I+v*M,r[12]=n*S+u*C+d*N+m*k,r[13]=o*S+f*C+p*N+y*k,r[14]=a*S+c*C+h*N+g*k,r[15]=i*S+s*C+b*N+v*k,r},negate:function(e,t){return(t=t||new l(16))[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t},ortho:function(e,t,r,n,o,a,i){return(i=i||new l(16))[0]=2/(t-e),i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=2/(n-r),i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2/(o-a),i[11]=0,i[12]=(t+e)/(e-t),i[13]=(n+r)/(r-n),i[14]=(a+o)/(o-a),i[15]=1,i},perspective:function(e,t,r,n,o){o=o||new l(16);const a=Math.tan(.5*Math.PI-.5*e),i=1/(r-n);return o[0]=a/t,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=a,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=(r+n)*i,o[11]=-1,o[12]=0,o[13]=0,o[14]=r*n*i*2,o[15]=0,o},rotateX:function(e,t,r){r=r||new l(16);const n=e[4],o=e[5],a=e[6],i=e[7],u=e[8],f=e[9],c=e[10],s=e[11],d=Math.cos(t),p=Math.sin(t);return r[4]=d*n+p*u,r[5]=d*o+p*f,r[6]=d*a+p*c,r[7]=d*i+p*s,r[8]=d*u-p*n,r[9]=d*f-p*o,r[10]=d*c-p*a,r[11]=d*s-p*i,e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},rotateY:function(e,t,r){r=r||new l(16);const n=e[0],o=e[1],a=e[2],i=e[3],u=e[8],f=e[9],c=e[10],s=e[11],d=Math.cos(t),p=Math.sin(t);return r[0]=d*n-p*u,r[1]=d*o-p*f,r[2]=d*a-p*c,r[3]=d*i-p*s,r[8]=d*u+p*n,r[9]=d*f+p*o,r[10]=d*c+p*a,r[11]=d*s+p*i,e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},rotateZ:function(e,t,r){r=r||new l(16);const n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],f=e[5],c=e[6],s=e[7],d=Math.cos(t),p=Math.sin(t);return r[0]=d*n+p*u,r[1]=d*o+p*f,r[2]=d*a+p*c,r[3]=d*i+p*s,r[4]=d*u-p*n,r[5]=d*f-p*o,r[6]=d*c-p*a,r[7]=d*s-p*i,e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},rotationX:function(e,t){t=t||new l(16);const r=Math.cos(e),n=Math.sin(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationY:function(e,t){t=t||new l(16);const r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rotationZ:function(e,t){t=t||new l(16);const r=Math.cos(e),n=Math.sin(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},scale:function(e,t,r){r=r||new l(16);const n=t[0],o=t[1],a=t[2];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=n*e[3],r[4]=o*e[4],r[5]=o*e[5],r[6]=o*e[6],r[7]=o*e[7],r[8]=a*e[8],r[9]=a*e[9],r[10]=a*e[10],r[11]=a*e[11],e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r},scaling:function(e,t){return(t=t||new l(16))[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},setAxis:function(e,t,r,n){n!==e&&(n=s(e,n));const o=4*r;return n[o+0]=t[0],n[o+1]=t[1],n[o+2]=t[2],n},setDefaultType:function(e){const t=l;return l=e,t},setTranslation:function(e,t,r){return e!==(r=r||d())&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11]),r[12]=t[0],r[13]=t[1],r[14]=t[2],r[15]=1,r},transformDirection:b,transformNormal:function(e,t,r){r=r||o();const n=p(e),a=t[0],i=t[1],u=t[2];return r[0]=a*n[0]+i*n[1]+u*n[2],r[1]=a*n[4]+i*n[5]+u*n[6],r[2]=a*n[8]+i*n[9]+u*n[10],r},transformPoint:h,translate:function(e,t,r){r=r||new l(16);const n=t[0],o=t[1],a=t[2],i=e[0],u=e[1],f=e[2],c=e[3],s=e[4],d=e[5],p=e[6],h=e[7],b=e[8],m=e[9],y=e[10],g=e[11],v=e[12],E=e[13],_=e[14],A=e[15];return e!==r&&(r[0]=i,r[1]=u,r[2]=f,r[3]=c,r[4]=s,r[5]=d,r[6]=p,r[7]=h,r[8]=b,r[9]=m,r[10]=y,r[11]=g),r[12]=i*n+s*o+b*a+v,r[13]=u*n+d*o+m*a+E,r[14]=f*n+p*o+y*a+_,r[15]=c*n+h*o+g*a+A,r},translation:function(e,t){return(t=t||new l(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},transpose:function(e,t){if((t=t||new l(16))===e){let r;return r=e[1],e[1]=e[4],e[4]=r,r=e[2],e[2]=e[8],e[8]=r,r=e[3],e[3]=e[12],e[12]=r,r=e[6],e[6]=e[9],e[9]=r,r=e[7],e[7]=e[13],e[13]=r,r=e[11],e[11]=e[14],e[14]=r,t}const r=e[0],n=e[1],o=e[2],a=e[3],i=e[4],u=e[5],f=e[6],c=e[7],s=e[8],d=e[9],p=e[10],h=e[11],b=e[12],m=e[13],y=e[14],g=e[15];return t[0]=r,t[1]=i,t[2]=s,t[3]=b,t[4]=n,t[5]=u,t[6]=d,t[7]=m,t[8]=o,t[9]=f,t[10]=p,t[11]=y,t[12]=a,t[13]=c,t[14]=h,t[15]=g,t}});const y=5120,g=5121,v=5122,E=5123,_=5124,A=5125,T=5126,x={};{const e=x;e[y]=Int8Array,e[g]=Uint8Array,e[v]=Int16Array,e[E]=Uint16Array,e[_]=Int32Array,e[A]=Uint32Array,e[T]=Float32Array,e[32819]=Uint16Array,e[32820]=Uint16Array,e[33635]=Uint16Array,e[5131]=Uint16Array,e[33640]=Uint32Array,e[35899]=Uint32Array,e[35902]=Uint32Array,e[36269]=Uint32Array,e[34042]=Uint32Array}function w(e){if(e instanceof Int8Array)return y;if(e instanceof Uint8Array)return g;if(e instanceof Uint8ClampedArray)return g;if(e instanceof Int16Array)return v;if(e instanceof Uint16Array)return E;if(e instanceof Int32Array)return _;if(e instanceof Uint32Array)return A;if(e instanceof Float32Array)return T;throw new Error("unsupported typed array type")}function R(e){if(e===Int8Array)return y;if(e===Uint8Array)return g;if(e===Uint8ClampedArray)return g;if(e===Int16Array)return v;if(e===Uint16Array)return E;if(e===Int32Array)return _;if(e===Uint32Array)return A;if(e===Float32Array)return T;throw new Error("unsupported typed array type")}function P(e){const t=x[e];if(!t)throw new Error("unknown gl type");return t}const F="undefined"!=typeof SharedArrayBuffer?function(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function U(e,t){Object.keys(t).forEach((function(r){t.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(t[r]=e[r])}))}function I(...e){console.error(...e)}function M(e,t){return"undefined"!=typeof WebGLTexture&&t instanceof WebGLTexture}const S={attribPrefix:""};function C(e){U(e,S)}function N(e,t,r,n,o){e.bindBuffer(t,r),e.bufferData(t,n,o||e.STATIC_DRAW)}function k(e,t,r,n){if(o=t,"undefined"!=typeof WebGLBuffer&&o instanceof WebGLBuffer)return t;var o;r=r||e.ARRAY_BUFFER;const a=e.createBuffer();return N(e,r,a,t,n),a}function B(e){return"indices"===e}function O(e){return e.length?e:e.data}const L=/coord|texture/i,z=/color|colour/i;function D(e,t){let r;if(t%(r=L.test(e)?2:z.test(e)?4:3)>0)throw new Error(`Can not guess numComponents for attribute '${e}'. Tried ${r} but ${t} values is not evenly divisible by ${r}. You should specify it.`);return r}function G(e,t){return e.numComponents||e.size||D(t,O(e).length)}function X(e,t){if(F(e))return e;if(F(e.data))return e.data;Array.isArray(e)&&(e={data:e});let r=e.type;return r||(r=B(t)?Uint16Array:Float32Array),new r(e.data)}function j(e,t){const r={};return Object.keys(t).forEach((function(n){if(!B(n)){const a=t[n],i=a.attrib||a.name||a.attribName||S.attribPrefix+n;if(a.value){if(!Array.isArray(a.value)&&!F(a.value))throw new Error("array.value is not array or typedarray");r[i]={value:a.value}}else{let t,u,f,c;if(a.buffer&&a.buffer instanceof WebGLBuffer)t=a.buffer,c=a.numComponents||a.size,u=a.type,f=a.normalize;else if("number"==typeof a||"number"==typeof a.data){const r=a.data||a,i=a.type||Float32Array,l=r*i.BYTES_PER_ELEMENT;u=R(i),f=void 0!==a.normalize?a.normalize:(o=i)===Int8Array||o===Uint8Array,c=a.numComponents||a.size||D(n,r),t=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,l,a.drawType||e.STATIC_DRAW)}else{const r=X(a,n);t=k(e,r,void 0,a.drawType),u=w(r),f=void 0!==a.normalize?a.normalize:function(e){return e instanceof Int8Array||e instanceof Uint8Array}(r),c=G(a,n)}r[i]={buffer:t,numComponents:c,type:u,normalize:f,stride:a.stride||0,offset:a.offset||0,divisor:void 0===a.divisor?void 0:a.divisor,drawType:a.drawType}}}var o})),e.bindBuffer(e.ARRAY_BUFFER,null),r}const Y=["position","positions","a_position"];function V(e,t,r){const n=j(e,t),o=Object.assign({},r||{});o.attribs=Object.assign({},r?r.attribs:{},n);const a=t.indices;if(a){const t=X(a,"indices");o.indices=k(e,t,e.ELEMENT_ARRAY_BUFFER),o.numElements=t.length,o.elementType=w(t)}else o.numElements||(o.numElements=function(e,t){let r,n;for(n=0;n<Y.length&&!((r=Y[n])in t)&&!((r=S.attribPrefix+r)in t);++n);n===Y.length&&(r=Object.keys(t)[0]);const o=t[r];e.bindBuffer(e.ARRAY_BUFFER,o.buffer);const a=e.getBufferParameter(e.ARRAY_BUFFER,e.BUFFER_SIZE);e.bindBuffer(e.ARRAY_BUFFER,null);const i=a/function(e,t){return t===e.BYTE?1:t===e.UNSIGNED_BYTE?1:t===e.SHORT?2:t===e.UNSIGNED_SHORT?2:t===e.INT?4:t===e.UNSIGNED_INT?4:t===e.FLOAT?4:0}(e,o.type),u=o.numComponents||o.size,f=i/u;if(f%1!=0)throw new Error(`numComponents ${u} not correct for length ${length}`);return f}(e,o.attribs));return o}function K(e,t,r){const n="indices"===r?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;return k(e,X(t,r),n)}function W(e,t){const r={};return Object.keys(t).forEach((function(n){r[n]=K(e,t[n],n)})),t.indices?(r.numElements=t.indices.length,r.elementType=w(X(t.indices))):r.numElements=function(e){let t,r;for(r=0;r<Y.length&&!((t=Y[r])in e);++r);r===Y.length&&(t=Object.keys(e)[0]);const n=e[t],o=O(n).length,a=G(n,t),i=o/a;if(o%a>0)throw new Error(`numComponents ${a} not correct for length ${o}`);return i}(t),r}function H(e,t){let r=0;return e.push=function(){for(let t=0;t<arguments.length;++t){const n=arguments[t];if(n instanceof Array||F(n))for(let t=0;t<n.length;++t)e[r++]=n[t];else e[r++]=n}},e.reset=function(e){r=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return this.length/this.numComponents|0}}),e}function q(e,t,r){return H(new(r||Float32Array)(e*t),e)}function $(e,t,r){const n=e.length,o=new Float32Array(3);for(let a=0;a<n;a+=3)r(t,[e[a],e[a+1],e[a+2]],o),e[a]=o[0],e[a+1]=o[1],e[a+2]=o[2]}function Z(e,t,r){r=r||o();const n=t[0],a=t[1],i=t[2];return r[0]=n*e[0]+a*e[1]+i*e[2],r[1]=n*e[4]+a*e[5]+i*e[6],r[2]=n*e[8]+a*e[9]+i*e[10],r}function J(e,t){return $(e,t,b),e}function Q(e,t){return $(e,p(t),Z),e}function ee(e,t){return $(e,t,h),e}function te(e,t){return Object.keys(e).forEach((function(r){const n=e[r];r.indexOf("pos")>=0?ee(n,t):r.indexOf("tan")>=0||r.indexOf("binorm")>=0?J(n,t):r.indexOf("norm")>=0&&Q(n,t)})),e}function re(e,t,r){return e=e||2,{position:{numComponents:2,data:[(t=t||0)+-1*(e*=.5),(r=r||0)+-1*e,t+1*e,r+-1*e,t+-1*e,r+1*e,t+1*e,r+1*e]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function ne(e,t,r,n,o){e=e||1,t=t||1,r=r||1,n=n||1,o=o||d();const a=(r+1)*(n+1),i=q(3,a),u=q(3,a),f=q(2,a);for(let o=0;o<=n;o++)for(let a=0;a<=r;a++){const c=a/r,l=o/n;i.push(e*c-.5*e,0,t*l-.5*t),u.push(0,1,0),f.push(c,l)}const c=r+1,l=q(3,r*n*2,Uint16Array);for(let e=0;e<n;e++)for(let t=0;t<r;t++)l.push((e+0)*c+t,(e+1)*c+t,(e+0)*c+t+1),l.push((e+1)*c+t,(e+1)*c+t+1,(e+0)*c+t+1);return te({position:i,normal:u,texcoord:f,indices:l},o)}function oe(e,t,r,n,o,a,i){if(t<=0||r<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");n=n||0,a=a||0;const u=(o=o||Math.PI)-n,f=(i=i||2*Math.PI)-a,c=(t+1)*(r+1),l=q(3,c),s=q(3,c),d=q(2,c);for(let o=0;o<=r;o++)for(let i=0;i<=t;i++){const c=i/t,p=o/r,h=f*c+a,b=u*p+n,m=Math.sin(h),y=Math.cos(h),g=Math.sin(b),v=y*g,E=Math.cos(b),_=m*g;l.push(e*v,e*E,e*_),s.push(v,E,_),d.push(1-c,p)}const p=t+1,h=q(3,t*r*2,Uint16Array);for(let e=0;e<t;e++)for(let t=0;t<r;t++)h.push((t+0)*p+e,(t+0)*p+e+1,(t+1)*p+e),h.push((t+1)*p+e,(t+0)*p+e+1,(t+1)*p+e+1);return{position:l,normal:s,texcoord:d,indices:h}}const ae=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function ie(e){const t=(e=e||1)/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],a=q(3,24),i=q(3,24),u=q(2,24),f=q(3,12,Uint16Array);for(let e=0;e<6;++e){const t=ae[e];for(let f=0;f<4;++f){const c=r[t[f]],l=n[e],s=o[f];a.push(c),i.push(l),u.push(s)}const c=4*e;f.push(c+0,c+1,c+2),f.push(c+0,c+2,c+3)}return{position:a,normal:i,texcoord:u,indices:f}}function ue(e,t,r,n,o,a,i){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(o<1)throw new Error("verticalSubdivisions must be 1 or greater");const u=void 0===a||a,f=void 0===i||i,c=(u?2:0)+(f?2:0),l=(n+1)*(o+1+c),s=q(3,l),d=q(3,l),p=q(2,l),h=q(3,n*(o+c)*2,Uint16Array),b=n+1,m=Math.atan2(e-t,r),y=Math.cos(m),g=Math.sin(m),v=o+(f?2:0);for(let a=u?-2:0;a<=v;++a){let i,u=a/o,f=r*u;a<0?(f=0,u=1,i=e):a>o?(f=r,u=1,i=t):i=e+a/o*(t-e),-2!==a&&a!==o+2||(i=0,u=0),f-=r/2;for(let e=0;e<b;++e){const t=Math.sin(e*Math.PI*2/n),r=Math.cos(e*Math.PI*2/n);s.push(t*i,f,r*i),d.push(a<0||a>o?0:t*y,a<0?-1:a>o?1:g,a<0||a>o?0:r*y),p.push(e/n,1-u)}}for(let e=0;e<o+c;++e)for(let t=0;t<n;++t)h.push(b*(e+0)+0+t,b*(e+0)+1+t,b*(e+1)+1+t),h.push(b*(e+0)+0+t,b*(e+1)+1+t,b*(e+1)+0+t);return{position:s,normal:d,texcoord:p,indices:h}}function fe(e,t){t=t||[];const r=[];for(let n=0;n<e.length;n+=4){const o=e[n],a=e.slice(n+1,n+4);a.push.apply(a,t);for(let e=0;e<o;++e)r.push.apply(r,a)}return r}function ce(){const e=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],t=fe([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),r=fe([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),n=e.length/3,o={position:q(3,n),texcoord:q(2,n),normal:q(3,n),color:q(4,n,Uint8Array),indices:q(3,n/3,Uint16Array)};o.position.push(e),o.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),o.normal.push(t),o.color.push(r);for(let e=0;e<n;++e)o.indices.push(e);return o}function le(e,t,r,n,o,i,u){if(o<=0)throw new Error("subdivisionDown must be > 0");const f=2,l=(u=u||1)-(i=i||0),s=2*(o+1)*(2+f),d=q(3,s),p=q(3,s),h=q(2,s);function b(e,t,r){return e+(t-e)*r}function m(t,r,u,s,m,y){for(let g=0;g<=o;g++){const v=r/(f-1),E=g/o,_=2*(v-.5),A=(i+E*l)*Math.PI,T=Math.sin(A),x=Math.cos(A),w=b(e,t,T),R=_*n,P=x*e,F=T*w;d.push(R,P,F);const U=a(c([0,T,x],u),s);p.push(U),h.push(v*m+y,E)}}for(let e=0;e<f;e++){const n=2*(e/(f-1)-.5);m(t,e,[1,1,1],[0,0,0],1,0),m(t,e,[0,0,0],[n,0,0],0,0),m(r,e,[1,1,1],[0,0,0],1,0),m(r,e,[0,0,0],[n,0,0],0,1)}const y=q(3,2*o*(2+f),Uint16Array);function g(e,t){for(let r=0;r<o;++r)y.push(e+r+0,e+r+1,t+r+0),y.push(e+r+1,t+r+1,t+r+0)}const v=o+1;return g(0*v,4*v),g(5*v,7*v),g(6*v,2*v),g(3*v,1*v),{position:d,normal:p,texcoord:h,indices:y}}function se(e,t,r,n,o,a){return ue(e,e,t,r,n,o,a)}function de(e,t,r,n,o,a){if(r<3)throw new Error("radialSubdivisions must be 3 or greater");if(n<3)throw new Error("verticalSubdivisions must be 3 or greater");o=o||0;const i=(a=a||2*Math.PI)-o,u=r+1,f=n+1,c=u*f,l=q(3,c),s=q(3,c),d=q(2,c),p=q(3,r*n*2,Uint16Array);for(let a=0;a<f;++a){const f=a/n,c=f*Math.PI*2,p=Math.sin(c),h=e+p*t,b=Math.cos(c),m=b*t;for(let e=0;e<u;++e){const t=e/r,n=o+t*i,a=Math.sin(n),u=Math.cos(n),c=a*h,y=u*h,g=a*p,v=u*p;l.push(c,m,y),s.push(g,b,v),d.push(t,1-f)}}for(let e=0;e<n;++e)for(let t=0;t<r;++t){const r=1+t,n=1+e;p.push(u*e+t,u*n+t,u*e+r),p.push(u*n+t,u*n+r,u*e+r)}return{position:l,normal:s,texcoord:d,indices:p}}function pe(e,t,r,n,o){if(t<3)throw new Error("divisions must be at least 3");o=o||1,n=n||0;const a=(t+1)*((r=r||1)+1),i=q(3,a),u=q(3,a),f=q(2,a),c=q(3,r*t*2,Uint16Array);let l=0;const s=e-n,d=t+1;for(let e=0;e<=r;++e){const a=n+s*Math.pow(e/r,o);for(let n=0;n<=t;++n){const o=2*Math.PI*n/t,s=a*Math.cos(o),p=a*Math.sin(o);if(i.push(s,0,p),u.push(0,1,0),f.push(1-n/t,e/r),e>0&&n!==t){const e=l+(n+1),t=l+n,r=l+n-d,o=l+(n+1)-d;c.push(e,t,r),c.push(e,r,o)}}l+=t+1}return{position:i,normal:u,texcoord:f,indices:c}}function he(e){return function(t){const r=e.apply(this,Array.prototype.slice.call(arguments,1));return W(t,r)}}function be(e){return function(t){const r=e.apply(null,Array.prototype.slice.call(arguments,1));return V(t,r)}}be(ce),he(ce),be(ie),he(ie),be(ne),he(ne),be(oe),he(oe),be(ue),he(ue),be(re),he(re),be(le),he(le),be(se),he(se),be(de),he(de),be(pe),he(pe);function me(e){return!!e.texStorage2D}const ye=function(){const e={},t={};return function(r,n){return function(r){const n=r.constructor.name;if(!e[n]){for(const e in r)if("number"==typeof r[e]){const n=t[r[e]];t[r[e]]=n?`${n} | ${e}`:e}e[n]=!0}}(r),t[n]||"0x"+n.toString(16)}}();const ge={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},ve=F;let Ee;function _e(){return Ee=Ee||("undefined"!=typeof document&&document.createElement?document.createElement("canvas").getContext("2d"):null)}const Ae=6406,Te=6407,xe=6408,we=6409,Re=6410,Pe=6402,Fe=34041,Ue=33321,Ie=36756,Me=33325,Se=33326,Ce=33330,Ne=33329,ke=33338,Be=33337,Oe=33340,Le=33339,ze=33323,De=36757,Ge=33327,Xe=33328,je=33336,Ye=33335,Ve=33332,Ke=33331,We=33334,He=33333,qe=32849,$e=35905,Ze=36194,Je=36758,Qe=35898,et=35901,tt=34843,rt=34837,nt=36221,ot=36239,at=36215,it=36233,ut=36209,ft=36227,ct=32856,lt=35907,st=36759,dt=32855,pt=32854,ht=32857,bt=34842,mt=34836,yt=36220,gt=36238,vt=36975,Et=36214,_t=36232,At=36226,Tt=36208,xt=33189,wt=33190,Rt=36012,Pt=36013,Ft=35056,Ut=5120,It=5121,Mt=5122,St=5123,Ct=5124,Nt=5125,kt=5126,Bt=32819,Ot=32820,Lt=33635,zt=5131,Dt=36193,Gt=33640,Xt=35899,jt=35902,Yt=36269,Vt=34042,Kt=33319,Wt=33320,Ht=6403,qt=36244,$t=36248,Zt=36249,Jt={};{const e=Jt;e[Ae]={numColorComponents:1},e[we]={numColorComponents:1},e[Re]={numColorComponents:2},e[Te]={numColorComponents:3},e[xe]={numColorComponents:4},e[Ht]={numColorComponents:1},e[qt]={numColorComponents:1},e[Kt]={numColorComponents:2},e[Wt]={numColorComponents:2},e[Te]={numColorComponents:3},e[$t]={numColorComponents:3},e[xe]={numColorComponents:4},e[Zt]={numColorComponents:4},e[Pe]={numColorComponents:1},e[Fe]={numColorComponents:2}}let Qt;function er(e){if(!Qt){const e={};e[Ae]={textureFormat:Ae,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[It,zt,Dt,kt]},e[we]={textureFormat:we,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[It,zt,Dt,kt]},e[Re]={textureFormat:Re,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[It,zt,Dt,kt]},e[Te]={textureFormat:Te,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[It,zt,Dt,kt,Lt]},e[xe]={textureFormat:xe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[It,zt,Dt,kt,Bt,Ot]},e[Ue]={textureFormat:Ht,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[It]},e[Ie]={textureFormat:Ht,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Ut]},e[Me]={textureFormat:Ht,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[kt,zt]},e[Se]={textureFormat:Ht,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[kt]},e[Ce]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[It]},e[Ne]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Ut]},e[Ve]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[St]},e[Ke]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Mt]},e[We]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Nt]},e[He]={textureFormat:qt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ct]},e[ze]={textureFormat:Kt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[It]},e[De]={textureFormat:Kt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Ut]},e[Ge]={textureFormat:Kt,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[kt,zt]},e[Xe]={textureFormat:Kt,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[kt]},e[je]={textureFormat:Wt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[It]},e[Ye]={textureFormat:Wt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Ut]},e[ke]={textureFormat:Wt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[St]},e[Be]={textureFormat:Wt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Mt]},e[Oe]={textureFormat:Wt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Nt]},e[Le]={textureFormat:Wt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Ct]},e[qe]={textureFormat:Te,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[It]},e[$e]={textureFormat:Te,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[It]},e[Ze]={textureFormat:Te,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[It,Lt]},e[Je]={textureFormat:Te,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Ut]},e[Qe]={textureFormat:Te,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[kt,zt,Xt]},e[et]={textureFormat:Te,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[kt,zt,jt]},e[tt]={textureFormat:Te,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[kt,zt]},e[rt]={textureFormat:Te,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[kt]},e[nt]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[It]},e[ot]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Ut]},e[at]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[St]},e[it]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Mt]},e[ut]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Nt]},e[ft]={textureFormat:$t,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Ct]},e[ct]={textureFormat:xe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[It]},e[lt]={textureFormat:xe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[It]},e[st]={textureFormat:xe,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Ut]},e[dt]={textureFormat:xe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[It,Ot,Gt]},e[pt]={textureFormat:xe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[It,Bt]},e[ht]={textureFormat:xe,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Gt]},e[bt]={textureFormat:xe,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[kt,zt]},e[mt]={textureFormat:xe,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[kt]},e[yt]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[It]},e[gt]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ut]},e[vt]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Gt]},e[Et]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[St]},e[_t]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Mt]},e[At]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Ct]},e[Tt]={textureFormat:Zt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Nt]},e[xt]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[St,Nt]},e[wt]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Nt]},e[Rt]={textureFormat:Pe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[kt]},e[Ft]={textureFormat:Fe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vt]},e[Pt]={textureFormat:Fe,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Yt]},Object.keys(e).forEach((function(t){const r=e[t];r.bytesPerElementMap={},r.bytesPerElement.forEach((function(e,t){const n=r.type[t];r.bytesPerElementMap[n]=e}))})),Qt=e}return Qt[e]}function tr(e,t){const r=er(e);if(!r)throw"unknown internal format";const n=r.bytesPerElementMap[t];if(void 0===n)throw"unknown internal format";return n}function rr(e){const t=er(e);if(!t)throw"unknown internal format";return{format:t.textureFormat,type:t.type[0]}}function nr(e){return 0==(e&e-1)}function or(e,t,r,n){if(!me(e))return nr(t)&&nr(r);const o=er(n);if(!o)throw"unknown internal format";return o.colorRenderable&&o.textureFilterable}function ar(e){const t=er(e);if(!t)throw"unknown internal format";return t.textureFilterable}function ir(e,t,r){return ve(t)?w(t):r||e.UNSIGNED_BYTE}function ur(e,t,r,n,o){if(o%1!=0)throw"can't guess dimensions";if(r||n){if(n){if(!r&&(r=o/n)%1)throw"can't guess dimensions"}else if((n=o/r)%1)throw"can't guess dimensions"}else{const a=Math.sqrt(o/(t===e.TEXTURE_CUBE_MAP?6:1));a%1==0?(r=a,n=a):(r=o,n=1)}return{width:r,height:n}}function fr(e){ge.textureColor=new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}function cr(e){U(e,ge),e.textureColor&&fr(e.textureColor)}const lr={};function sr(e,t){void 0!==t.colorspaceConversion&&(lr.colorspaceConversion=e.getParameter(e.UNPACK_COLORSPACE_CONVERSION_WEBGL),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.colorspaceConversion)),void 0!==t.premultiplyAlpha&&(lr.premultiplyAlpha=e.getParameter(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha)),void 0!==t.flipY&&(lr.flipY=e.getParameter(e.UNPACK_FLIP_Y_WEBGL),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY))}function dr(e,t){void 0!==t.colorspaceConversion&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,lr.colorspaceConversion),void 0!==t.premultiplyAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,lr.premultiplyAlpha),void 0!==t.flipY&&e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,lr.flipY)}function pr(e){lr.unpackAlignment=e.getParameter(e.UNPACK_ALIGNMENT),me(e)&&(lr.unpackRowLength=e.getParameter(e.UNPACK_ROW_LENGTH),lr.unpackImageHeight=e.getParameter(e.UNPACK_IMAGE_HEIGHT),lr.unpackSkipPixels=e.getParameter(e.UNPACK_SKIP_PIXELS),lr.unpackSkipRows=e.getParameter(e.UNPACK_SKIP_ROWS),lr.unpackSkipImages=e.getParameter(e.UNPACK_SKIP_IMAGES))}function hr(e){e.pixelStorei(e.UNPACK_ALIGNMENT,lr.unpackAlignment),me(e)&&(e.pixelStorei(e.UNPACK_ROW_LENGTH,lr.unpackRowLength),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,lr.unpackImageHeight),e.pixelStorei(e.UNPACK_SKIP_PIXELS,lr.unpackSkipPixels),e.pixelStorei(e.UNPACK_SKIP_ROWS,lr.unpackSkipRows),e.pixelStorei(e.UNPACK_SKIP_IMAGES,lr.unpackSkipImages))}function br(e,t,r,n){var o;n.minMag&&(r.call(e,t,e.TEXTURE_MIN_FILTER,n.minMag),r.call(e,t,e.TEXTURE_MAG_FILTER,n.minMag)),n.min&&r.call(e,t,e.TEXTURE_MIN_FILTER,n.min),n.mag&&r.call(e,t,e.TEXTURE_MAG_FILTER,n.mag),n.wrap&&(r.call(e,t,e.TEXTURE_WRAP_S,n.wrap),r.call(e,t,e.TEXTURE_WRAP_T,n.wrap),(t===e.TEXTURE_3D||(o=t,"undefined"!=typeof WebGLSampler&&o instanceof WebGLSampler))&&r.call(e,t,e.TEXTURE_WRAP_R,n.wrap)),n.wrapR&&r.call(e,t,e.TEXTURE_WRAP_R,n.wrapR),n.wrapS&&r.call(e,t,e.TEXTURE_WRAP_S,n.wrapS),n.wrapT&&r.call(e,t,e.TEXTURE_WRAP_T,n.wrapT),n.minLod&&r.call(e,t,e.TEXTURE_MIN_LOD,n.minLod),n.maxLod&&r.call(e,t,e.TEXTURE_MAX_LOD,n.maxLod),n.baseLevel&&r.call(e,t,e.TEXTURE_BASE_LEVEL,n.baseLevel),n.maxLevel&&r.call(e,t,e.TEXTURE_MAX_LEVEL,n.maxLevel)}function mr(e,t,r){const n=r.target||e.TEXTURE_2D;e.bindTexture(n,t),br(e,n,e.texParameteri,r)}function yr(e,t,r,n,o,a,i){r=r||ge.textureOptions,a=a||e.RGBA,i=i||e.UNSIGNED_BYTE;const u=r.target||e.TEXTURE_2D;if(n=n||r.width,o=o||r.height,e.bindTexture(u,t),or(e,n,o,a))e.generateMipmap(u);else{const t=ar(a)?e.LINEAR:e.NEAREST;e.texParameteri(u,e.TEXTURE_MIN_FILTER,t),e.texParameteri(u,e.TEXTURE_MAG_FILTER,t),e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}}function gr(e){return!0===e.auto||void 0===e.auto&&void 0===e.level}function vr(e,t){return(t=t||{}).cubeFaceOrder||[e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_POSITIVE_Y,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function Er(e,t){const r=vr(e,t).map((function(e,t){return{face:e,ndx:t}}));return r.sort((function(e,t){return e.face-t.face})),r}function _r(e,t,r,n){const o=(n=n||ge.textureOptions).target||e.TEXTURE_2D,a=n.level||0;let i=r.width,u=r.height;const f=n.internalFormat||n.format||e.RGBA,c=rr(f),l=n.format||c.format,s=n.type||c.type;if(sr(e,n),e.bindTexture(o,t),o===e.TEXTURE_CUBE_MAP){const c=r.width,d=r.height;let p,h;if(c/6===d)p=d,h=[0,0,1,0,2,0,3,0,4,0,5,0];else if(d/6===c)p=c,h=[0,0,0,1,0,2,0,3,0,4,0,5];else if(c/3==d/2)p=c/3,h=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(c/2!=d/3)throw"can't figure out cube map from element: "+(r.src?r.src:r.nodeName);p=c/2,h=[0,0,1,0,0,1,1,1,0,2,1,2]}const b=_e();b?(b.canvas.width=p,b.canvas.height=p,i=p,u=p,Er(e,n).forEach((function(t){const n=h[2*t.ndx+0]*p,o=h[2*t.ndx+1]*p;b.drawImage(r,n,o,p,p,0,0,p,p),e.texImage2D(t.face,a,f,l,s,b.canvas)})),b.canvas.width=1,b.canvas.height=1):"undefined"!=typeof createImageBitmap&&(i=p,u=p,Er(e,n).forEach((function(c){const d=h[2*c.ndx+0]*p,b=h[2*c.ndx+1]*p;e.texImage2D(c.face,a,f,p,p,0,l,s,null),createImageBitmap(r,d,b,p,p,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then((function(r){sr(e,n),e.bindTexture(o,t),e.texImage2D(c.face,a,f,l,s,r),dr(e,n),gr(n)&&yr(e,t,n,i,u,f,s)}))})))}else if(o===e.TEXTURE_3D||o===e.TEXTURE_2D_ARRAY){const t=Math.min(r.width,r.height),n=Math.max(r.width,r.height),i=n/t;if(i%1!=0)throw"can not compute 3D dimensions of element";const u=r.width===n?1:0,c=r.height===n?1:0;pr(e),e.pixelStorei(e.UNPACK_ALIGNMENT,1),e.pixelStorei(e.UNPACK_ROW_LENGTH,r.width),e.pixelStorei(e.UNPACK_IMAGE_HEIGHT,0),e.pixelStorei(e.UNPACK_SKIP_IMAGES,0),e.texImage3D(o,a,f,t,t,t,0,l,s,null);for(let n=0;n<i;++n){const i=n*t*u,f=n*t*c;e.pixelStorei(e.UNPACK_SKIP_PIXELS,i),e.pixelStorei(e.UNPACK_SKIP_ROWS,f),e.texSubImage3D(o,a,0,0,n,t,t,1,l,s,r)}hr(e)}else e.texImage2D(o,a,f,l,s,r);dr(e,n),gr(n)&&yr(e,t,n,i,u,f,s),mr(e,t,n)}function Ar(){}function Tr(e,t){return void 0!==t||function(e){if("undefined"!=typeof document){const t=document.createElement("a");return t.href=e,t.hostname===location.hostname&&t.port===location.port&&t.protocol===location.protocol}{const t=new URL(location.href).origin;return new URL(e,location.href).origin===t}}(e)?t:"anonymous"}function xr(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof ImageData&&e instanceof ImageData||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement}function wr(e,t,r){return xr(e)?(setTimeout((function(){r(null,e)})),e):function(e,t,r){let n;if(r=r||Ar,t=void 0!==t?t:ge.crossOrigin,t=Tr(e,t),"undefined"!=typeof Image){n=new Image,void 0!==t&&(n.crossOrigin=t);const o=function(){n.removeEventListener("error",a),n.removeEventListener("load",i),n=null},a=function(){const t="couldn't load image: "+e;I(t),r(t,n),o()},i=function(){r(null,n),o()};return n.addEventListener("error",a),n.addEventListener("load",i),n.src=e,n}if("undefined"!=typeof ImageBitmap){let o,a;const i=function(){r(o,a)},u={};t&&(u.mode="cors"),fetch(e,u).then((function(e){if(!e.ok)throw e;return e.blob()})).then((function(e){return createImageBitmap(e,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(e){a=e,setTimeout(i)})).catch((function(e){o=e,setTimeout(i)})),n=null}return n}(e,t,r)}function Rr(e,t,r){const n=(r=r||ge.textureOptions).target||e.TEXTURE_2D;if(e.bindTexture(n,t),!1===r.color)return;const o=function(e){return e=e||ge.textureColor,ve(e)?e:new Uint8Array([255*e[0],255*e[1],255*e[2],255*e[3]])}(r.color);if(n===e.TEXTURE_CUBE_MAP)for(let t=0;t<6;++t)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);else n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o)}function Pr(e,t,r,n){return n=n||Ar,r=r||ge.textureOptions,Rr(e,t,r),wr((r=Object.assign({},r)).src,r.crossOrigin,(function(o,a){o?n(o,t,a):(_r(e,t,a,r),n(null,t,a))}))}function Fr(e,t,r,n){n=n||Ar;const o=r.src;if(6!==o.length)throw"there must be 6 urls for a cubemap";const a=r.level||0,i=r.internalFormat||r.format||e.RGBA,u=rr(i),f=r.format||u.format,c=r.type||e.UNSIGNED_BYTE,l=r.target||e.TEXTURE_2D;if(l!==e.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";Rr(e,t,r),r=Object.assign({},r);let s=6;const d=[],p=vr(e,r);let h;h=o.map((function(o,u){return wr(o,r.crossOrigin,(b=p[u],function(o,u){--s,o?d.push(o):u.width!==u.height?d.push("cubemap face img is not a square: "+u.src):(sr(e,r),e.bindTexture(l,t),5===s?vr(e).forEach((function(t){e.texImage2D(t,a,i,f,c,u)})):e.texImage2D(b,a,i,f,c,u),dr(e,r),gr(r)&&e.generateMipmap(l)),0===s&&n(d.length?d:void 0,t,h)}));var b}))}function Ur(e,t,r,n){n=n||Ar;const o=r.src,a=r.internalFormat||r.format||e.RGBA,i=rr(a),u=r.format||i.format,f=r.type||e.UNSIGNED_BYTE,c=r.target||e.TEXTURE_2D_ARRAY;if(c!==e.TEXTURE_3D&&c!==e.TEXTURE_2D_ARRAY)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";Rr(e,t,r),r=Object.assign({},r);let l=o.length;const s=[];let d;const p=r.level||0;let h=r.width,b=r.height;const m=o.length;let y=!0;d=o.map((function(o,i){return wr(o,r.crossOrigin,(g=i,function(o,i){if(--l,o)s.push(o);else{if(sr(e,r),e.bindTexture(c,t),y){y=!1,h=r.width||i.width,b=r.height||i.height,e.texImage3D(c,p,a,h,b,m,0,u,f,null);for(let t=0;t<m;++t)e.texSubImage3D(c,p,0,0,t,h,b,1,u,f,i)}else{let t,r=i;i.width===h&&i.height===b||(r=(t=_e()).canvas,t.canvas.width=h,t.canvas.height=b,t.drawImage(i,0,0,h,b)),e.texSubImage3D(c,p,0,0,g,h,b,1,u,f,r),t&&r===t.canvas&&(t.canvas.width=0,t.canvas.height=0)}dr(e,r),gr(r)&&e.generateMipmap(c)}0===l&&n(s.length?s:void 0,t,d)}));var g}))}function Ir(e,t,r,n){const o=(n=n||ge.textureOptions).target||e.TEXTURE_2D;e.bindTexture(o,t);let a=n.width,i=n.height,u=n.depth;const f=n.level||0,c=n.internalFormat||n.format||e.RGBA,l=rr(c),s=n.format||l.format,d=n.type||ir(e,r,l.type);if(ve(r))r instanceof Uint8ClampedArray&&(r=new Uint8Array(r.buffer));else{const e=P(d);r=new e(r)}const p=tr(c,d),h=r.byteLength/p;if(h%1)throw"length wrong size for format: "+ye(e,s);let b;if(o===e.TEXTURE_3D||o===e.TEXTURE_2D_ARRAY)if(a||i||u)!a||i&&u?!i||a&&u?(b=ur(e,o,a,i,h/u),a=b.width,i=b.height):(b=ur(e,o,a,u,h/i),a=b.width,u=b.height):(b=ur(e,o,i,u,h/a),i=b.width,u=b.height);else{const e=Math.cbrt(h);if(e%1!=0)throw"can't guess cube size of array of numElements: "+h;a=e,i=e,u=e}else b=ur(e,o,a,i,h),a=b.width,i=b.height;if(pr(e),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment||1),sr(e,n),o===e.TEXTURE_CUBE_MAP){const t=h/6*(p/r.BYTES_PER_ELEMENT);Er(e,n).forEach(n=>{const o=t*n.ndx,u=r.subarray(o,o+t);e.texImage2D(n.face,f,c,a,i,0,s,d,u)})}else o===e.TEXTURE_3D||o===e.TEXTURE_2D_ARRAY?e.texImage3D(o,f,c,a,i,u,0,s,d,r):e.texImage2D(o,f,c,a,i,0,s,d,r);return dr(e,n),hr(e),{width:a,height:i,depth:u,type:d}}function Mr(e,t,r){const n=r.target||e.TEXTURE_2D;e.bindTexture(n,t);const o=r.level||0,a=r.internalFormat||r.format||e.RGBA,i=rr(a),u=r.format||i.format,f=r.type||i.type;if(sr(e,r),n===e.TEXTURE_CUBE_MAP)for(let t=0;t<6;++t)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,o,a,r.width,r.height,0,u,f,null);else n===e.TEXTURE_3D||n===e.TEXTURE_2D_ARRAY?e.texImage3D(n,o,a,r.width,r.height,r.depth,0,u,f,null):e.texImage2D(n,o,a,r.width,r.height,0,u,f,null);dr(e,r)}function Sr(e,t,r){r=r||Ar,t=t||ge.textureOptions;const n=e.createTexture(),o=t.target||e.TEXTURE_2D;let a=t.width||1,i=t.height||1;const u=t.internalFormat||e.RGBA,f=rr(u);let c=t.type||f.type;e.bindTexture(o,n),o===e.TEXTURE_CUBE_MAP&&(e.texParameteri(o,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(o,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE));let l=t.src;if(l)if("function"==typeof l&&(l=l(e,t)),"string"==typeof l)Pr(e,n,t,r);else if(ve(l)||Array.isArray(l)&&("number"==typeof l[0]||Array.isArray(l[0])||ve(l[0]))){const r=Ir(e,n,l,t);a=r.width,i=r.height,c=r.type}else if(Array.isArray(l)&&("string"==typeof l[0]||xr(l[0])))o===e.TEXTURE_CUBE_MAP?Fr(e,n,t,r):Ur(e,n,t,r);else{if(!xr(l))throw"unsupported src type";_r(e,n,l,t),a=l.width,i=l.height}else Mr(e,n,t);return gr(t)&&yr(e,n,t,a,i,u,c),mr(e,n,t),n}const Cr={};function Nr(e,t){return Cr[t].bindPoint}function kr(e,t){return function(r){e.uniform1i(t,r)}}function Br(e,t){return function(r){e.uniform1iv(t,r)}}function Or(e,t){return function(r){e.uniform2iv(t,r)}}function Lr(e,t){return function(r){e.uniform3iv(t,r)}}function zr(e,t){return function(r){e.uniform4iv(t,r)}}function Dr(e,t,r,n){const o=Nr(0,t);return me(e)?function(t){let a,i;M(0,t)?(a=t,i=null):(a=t.texture,i=t.sampler),e.uniform1i(n,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(o,a),e.bindSampler(r,i)}:function(t){e.uniform1i(n,r),e.activeTexture(e.TEXTURE0+r),e.bindTexture(o,t)}}function Gr(e,t,r,n,o){const a=Nr(0,t),i=new Int32Array(o);for(let e=0;e<o;++e)i[e]=r+e;return me(e)?function(t){e.uniform1iv(n,i),t.forEach((function(t,n){let o,u;e.activeTexture(e.TEXTURE0+i[n]),M(0,t)?(o=t,u=null):(o=t.texture,u=t.sampler),e.bindSampler(r,u),e.bindTexture(a,o)}))}:function(t){e.uniform1iv(n,i),t.forEach((function(t,r){e.activeTexture(e.TEXTURE0+i[r]),e.bindTexture(a,t)}))}}function Xr(e,t){return function(r){if(r.value)switch(e.disableVertexAttribArray(t),r.value.length){case 4:e.vertexAttrib4fv(t,r.value);break;case 3:e.vertexAttrib3fv(t,r.value);break;case 2:e.vertexAttrib2fv(t,r.value);break;case 1:e.vertexAttrib1fv(t,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,r.numComponents||r.size,r.type||e.FLOAT,r.normalize||!1,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function jr(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an integer constant value must be 4!");e.vertexAttrib4iv(t,r.value)}else e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function Yr(e,t){return function(r){if(r.value){if(e.disableVertexAttribArray(t),4!==r.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");e.vertexAttrib4uiv(t,r.value)}else e.bindBuffer(e.ARRAY_BUFFER,r.buffer),e.enableVertexAttribArray(t),e.vertexAttribIPointer(t,r.numComponents||r.size,r.type||e.UNSIGNED_INT,r.stride||0,r.offset||0),void 0!==r.divisor&&e.vertexAttribDivisor(t,r.divisor)}}function Vr(e,t,r){const n=r.size,o=r.count;return function(r){e.bindBuffer(e.ARRAY_BUFFER,r.buffer);const a=r.size||r.numComponents||n,i=a/o,u=r.type||e.FLOAT,f=Cr[u].size*a,c=r.normalize||!1,l=r.offset||0,s=f/o;for(let n=0;n<o;++n)e.enableVertexAttribArray(t+n),e.vertexAttribPointer(t+n,i,u,c,f,l+s*n),void 0!==r.divisor&&e.vertexAttribDivisor(t+n,r.divisor)}}Cr[5126]={Type:Float32Array,size:4,setter:function(e,t){return function(r){e.uniform1f(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1fv(t,r)}}},Cr[35664]={Type:Float32Array,size:8,setter:function(e,t){return function(r){e.uniform2fv(t,r)}}},Cr[35665]={Type:Float32Array,size:12,setter:function(e,t){return function(r){e.uniform3fv(t,r)}}},Cr[35666]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniform4fv(t,r)}}},Cr[5124]={Type:Int32Array,size:4,setter:kr,arraySetter:Br},Cr[35667]={Type:Int32Array,size:8,setter:Or},Cr[35668]={Type:Int32Array,size:12,setter:Lr},Cr[35669]={Type:Int32Array,size:16,setter:zr},Cr[5125]={Type:Uint32Array,size:4,setter:function(e,t){return function(r){e.uniform1ui(t,r)}},arraySetter:function(e,t){return function(r){e.uniform1uiv(t,r)}}},Cr[36294]={Type:Uint32Array,size:8,setter:function(e,t){return function(r){e.uniform2uiv(t,r)}}},Cr[36295]={Type:Uint32Array,size:12,setter:function(e,t){return function(r){e.uniform3uiv(t,r)}}},Cr[36296]={Type:Uint32Array,size:16,setter:function(e,t){return function(r){e.uniform4uiv(t,r)}}},Cr[35670]={Type:Uint32Array,size:4,setter:kr,arraySetter:Br},Cr[35671]={Type:Uint32Array,size:8,setter:Or},Cr[35672]={Type:Uint32Array,size:12,setter:Lr},Cr[35673]={Type:Uint32Array,size:16,setter:zr},Cr[35674]={Type:Float32Array,size:16,setter:function(e,t){return function(r){e.uniformMatrix2fv(t,!1,r)}}},Cr[35675]={Type:Float32Array,size:36,setter:function(e,t){return function(r){e.uniformMatrix3fv(t,!1,r)}}},Cr[35676]={Type:Float32Array,size:64,setter:function(e,t){return function(r){e.uniformMatrix4fv(t,!1,r)}}},Cr[35685]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix2x3fv(t,!1,r)}}},Cr[35686]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix2x4fv(t,!1,r)}}},Cr[35687]={Type:Float32Array,size:24,setter:function(e,t){return function(r){e.uniformMatrix3x2fv(t,!1,r)}}},Cr[35688]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix3x4fv(t,!1,r)}}},Cr[35689]={Type:Float32Array,size:32,setter:function(e,t){return function(r){e.uniformMatrix4x2fv(t,!1,r)}}},Cr[35690]={Type:Float32Array,size:48,setter:function(e,t){return function(r){e.uniformMatrix4x3fv(t,!1,r)}}},Cr[35678]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:3553},Cr[35680]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:34067},Cr[35679]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:32879},Cr[35682]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:3553},Cr[36289]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:35866},Cr[36292]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:35866},Cr[36293]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:34067},Cr[36298]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:3553},Cr[36299]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:32879},Cr[36300]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:34067},Cr[36303]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:35866},Cr[36306]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:3553},Cr[36307]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:32879},Cr[36308]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:34067},Cr[36311]={Type:null,size:0,setter:Dr,arraySetter:Gr,bindPoint:35866};const Kr={};Kr[5126]={size:4,setter:Xr},Kr[35664]={size:8,setter:Xr},Kr[35665]={size:12,setter:Xr},Kr[35666]={size:16,setter:Xr},Kr[5124]={size:4,setter:jr},Kr[35667]={size:8,setter:jr},Kr[35668]={size:12,setter:jr},Kr[35669]={size:16,setter:jr},Kr[5125]={size:4,setter:Yr},Kr[36294]={size:8,setter:Yr},Kr[36295]={size:12,setter:Yr},Kr[36296]={size:16,setter:Yr},Kr[35670]={size:4,setter:jr},Kr[35671]={size:8,setter:jr},Kr[35672]={size:12,setter:jr},Kr[35673]={size:16,setter:jr},Kr[35674]={size:4,setter:Vr,count:2},Kr[35675]={size:9,setter:Vr,count:3},Kr[35676]={size:16,setter:Vr,count:4};function Wr(e){const t=e.name;return t.startsWith("gl_")||t.startsWith("webgl_")}function Hr(e,t){let r=0;function n(t,n){const o=e.getUniformLocation(t,n.name),a=n.size>1&&"[0]"===n.name.substr(-3),i=n.type,u=Cr[i];if(!u)throw new Error(`unknown type: 0x${i.toString(16)}`);let f;if(u.bindPoint){const t=r;r+=n.size,f=a?u.arraySetter(e,i,t,o,n.size):u.setter(e,i,t,o,n.size)}else f=u.arraySetter&&a?u.arraySetter(e,o):u.setter(e,o);return f.location=o,f}const o={},a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<a;++r){const a=e.getActiveUniform(t,r);if(Wr(a))continue;let i=a.name;"[0]"===i.substr(-3)&&(i=i.substr(0,i.length-3));const u=n(t,a);o[i]=u}return o}function qr(e,t){const r={},n=e.getProgramParameter(t,e.TRANSFORM_FEEDBACK_VARYINGS);for(let o=0;o<n;++o){const n=e.getTransformFeedbackVarying(t,o);r[n.name]={index:o,type:n.type,size:n.size}}return r}function $r(e,t){const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=[],o=[];for(let a=0;a<r;++a){o.push(a),n.push({});const r=e.getActiveUniform(t,a);if(Wr(r))break;n[a].name=r.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(r){const a=r[0],i=r[1];e.getActiveUniforms(t,o,e[a]).forEach((function(e,t){n[t][i]=e}))}));const a={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS);for(let r=0;r<i;++r){const n=e.getActiveUniformBlockName(t,r),o={index:r,usedByVertexShader:e.getActiveUniformBlockParameter(t,r,e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:e.getActiveUniformBlockParameter(t,r,e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:e.getActiveUniformBlockParameter(t,r,e.UNIFORM_BLOCK_DATA_SIZE),uniformIndices:e.getActiveUniformBlockParameter(t,r,e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};o.used=o.usedByVertexShader||o.usedByFragmentShader,a[n]=o}return{blockSpecs:a,uniformData:n}}function Zr(e,t){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let o=0;o<n;++o){const n=e.getActiveAttrib(t,o);if(Wr(n))continue;const a=e.getAttribLocation(t,n.name),i=Kr[n.type],u=i.setter(e,a,i);u.location=a,r[n.name]=u}return r}const Jr={};Jr[34041]=33306,Jr[6401]=36128,Jr[36168]=36128,Jr[6402]=36096,Jr[33189]=36096;const Qr={};Qr[32854]=!0,Qr[32855]=!0,Qr[36194]=!0,Qr[34041]=!0,Qr[33189]=!0,Qr[6401]=!0,Qr[36168]=!0;const en={addExtensionsToContext:!0};var tn,rn=function(){function e(e){this.gl=e}return e.prototype.loadShader=function(e,t){var r=this.gl.createShader(t),n=/^[ \t]*\n/;return n.test(e)&&(e=e.replace(n,"")),this.gl.shaderSource(r,e),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS)?r:(this.gl.deleteShader(r),null)},e.prototype.createProgram=function(e,t){var r=this,n=this.gl.createProgram();if(e.forEach((function(e){return r.gl.attachShader(n,e)})),t){t.attribLocations&&Object.keys(t.attribLocations).forEach((function(e){this.gl.bindAttribLocation(n,t.attribLocations[e],e)}));var o=t.transformFeedbackVaryings;o&&this.gl.transformFeedbackVaryings(n,o,t.transformFeedbackMode||this.gl.SEPARATE_ATTRIBS)}return this.gl.linkProgram(n),this.gl.getProgramParameter(n,this.gl.LINK_STATUS)?n:(this.gl.deleteProgram(n),e.forEach((function(e){return r.gl.deleteShader(e)})),null)},e.prototype.createProgramInfo=function(e){return{program:e,uniformSetters:Hr(this.gl,e),attribSetters:Zr(this.gl,e),uniformBlockSpec:$r(this.gl,e),transformFeedbackInfo:qr(this.gl,e)}},e.prototype.createBufferInfo=function(e){return V(this.gl,e)},e.prototype.createTexture=function(e){return Sr(this.gl,e)},e.prototype.setDefaults=function(e){return U(t=e,en),C(t),void cr(t);var t},e.prototype.setAttributes=function(e,t){for(var r in t){var n=e[r];n&&n(t[r])}},e.prototype.setBuffersAndAttributes=function(e,t){t.vertexArrayObject?this.gl.bindVertexArray(t.vertexArrayObject):(this.setAttributes(e.attribSetters||e,t.attribs),t.indices&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t.indices))},e.prototype.setUniforms=function(e,t){for(var r=e.uniformSetters||e,n=arguments.length,o=1;o<n;o++){var a=arguments[o];if(Array.isArray(a))for(var i=a.length,u=0;u<i;u++)this.setUniforms(r,a[u]);else for(var f in a){var c=r[f];c&&c(a[f])}}},e.prototype.drawBufferInfo=function(e,t,r,n,o){t=void 0===t?this.gl.TRIANGLES:t;var a=e.indices,i=e.elementType,u=void 0===r?e.numElements:r;n=void 0===n?0:n,i||a?void 0!==o?this.gl.drawElementsInstanced(t,u,void 0===i?this.gl.UNSIGNED_SHORT:e.elementType,n,o):this.gl.drawElements(t,u,void 0===i?this.gl.UNSIGNED_SHORT:e.elementType,n):void 0!==o?this.gl.drawArraysInstanced(t,n,u,o):this.gl.drawArrays(t,n,u)},e.prototype.drawObjects=function(e){var t=this,r=null,n=null;e.forEach((function(e){if(!1!==e.active){var o=e.programInfo,a=e.vertexArrayInfo||e.bufferInfo,i=!1,u=void 0===e.type?t.gl.TRIANGLES:e.type;o!==r&&(r=o,t.gl.useProgram(o.program),i=!0),(i||a!==n)&&(n&&n.vertexArrayObject&&!a.vertexArrayObject&&t.gl.bindVertexArray(null),n=a,t.setBuffersAndAttributes(o,a)),t.setUniforms(o,e.uniforms),t.drawBufferInfo(a,u,e.count,e.offset,e.instanceCount)}})),n&&n.vertexArrayObject&&this.gl.bindVertexArray(null)},e.prototype.resizeCanvasToDisplaySize=function(e,t){void 0===t&&(t=1),t=Math.max(0,t);var r=e.clientWidth*t|0,n=e.clientHeight*t|0;e.width===r&&e.height===n||(e.width=r,e.height=n)},e.m4=m,e}(),nn=(tn=function(e,t){return(tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}tn(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),on=function(e){function t(t,r){var n=e.call(this,t)||this;n._size=r;var o=n.createVertices(r);return n._bufferInfo=n.createBufferInfo(o),n}return nn(t,e),Object.defineProperty(t.prototype,"Size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bufferInfo",{get:function(){return this._bufferInfo},enumerable:!0,configurable:!0}),t.prototype.createVertices=function(e){for(var t=(e=e||1)/2,r=[[-t,-t,-t],[+t,-t,-t],[-t,+t,-t],[+t,+t,-t],[-t,-t,+t],[+t,-t,+t],[-t,+t,+t],[+t,+t,+t]],n=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],o=[[1,0],[0,0],[0,1],[1,1]],a=this.createAugmentedTypedArray(3,24),i=this.createAugmentedTypedArray(3,24),u=this.createAugmentedTypedArray(2,24),f=this.createAugmentedTypedArray(3,12,Uint16Array),c=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]],l=0;l<6;++l){for(var s=c[l],d=0;d<4;++d){var p=r[s[d]],h=n[l],b=o[d];a.push(p),i.push(h),u.push(b)}var m=4*l;f.push(m+0,m+1,m+2),f.push(m+0,m+2,m+3)}return{position:a,normal:i,texcoord:u,indices:f}},t.prototype.createBufferInfo=function(e){return this.pgl.createBufferInfo(e)},t}(function(){function e(e){this.pgl=e}return e.prototype.augmentTypedArray=function(e,t){var r=function(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer},n=0;return e.push=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];for(var a=0;a<t.length;a++){var i=t[a];if(i instanceof Array||r(i))for(var u=0;u<i.length;u++)e[n++]=i[u];else e[n++]=i}},e.reset=function(e){n=e||0},e.numComponents=t,Object.defineProperty(e,"numElements",{get:function(){return e.length/e.numComponents|0}}),e},e.prototype.createAugmentedTypedArray=function(e,t,r){var n=r||Float32Array;return this.augmentTypedArray(new n(e*t),e)},e}()),an=r(0),un=rn.m4,fn=function(e,t){return e+Math.random()*(t-e)},cn=document.getElementById("canvas"),ln=cn.getContext("webgl2"),sn=new rn(ln);sn.setDefaults({attribPrefix:"a_"});for(var dn=sn.loadShader("precision mediump float;\n\nvarying vec4 v_position;\nvarying vec2 v_texCoord;\nvarying vec3 v_normal;\nvarying vec3 v_surfaceToLight;\nvarying vec3 v_surfaceToView;\n\nuniform vec4 u_lightColor;\nuniform vec4 u_diffuseMult;\nuniform sampler2D u_diffuse;\nuniform vec4 u_specular;\nuniform float u_shininess;\nuniform float u_specularFactor;\n\nvec4 lit(float l ,float h, float m) {\n  return vec4(1.0,\n              abs(l),//max(l, 0.0),\n              (l > 0.0) ? pow(max(0.0, h), m) : 0.0,\n              1.0);\n}\n\nvoid main() {\n  vec4 diffuseColor = texture2D(u_diffuse, v_texCoord) * u_diffuseMult;\n  vec3 a_normal = normalize(v_normal);\n  vec3 surfaceToLight = normalize(v_surfaceToLight);\n  vec3 surfaceToView = normalize(v_surfaceToView);\n  vec3 halfVector = normalize(surfaceToLight + surfaceToView);\n  vec4 litR = lit(dot(a_normal, surfaceToLight),\n                    dot(a_normal, halfVector), u_shininess);\n  vec4 outColor = vec4((\n  u_lightColor * (diffuseColor * litR.y +\n                u_specular * litR.z * u_specularFactor)).rgb,\n      diffuseColor.a);\n  gl_FragColor = outColor;\n}\n",ln.FRAGMENT_SHADER),pn=sn.loadShader("uniform mat4 u_worldViewProjection;\nuniform vec3 u_lightWorldPos;\nuniform mat4 u_world;\nuniform mat4 u_viewInverse;\nuniform mat4 u_worldInverseTranspose;\n\nattribute vec4 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texcoord;\n\nvarying vec4 v_position;\nvarying vec2 v_texCoord;\nvarying vec3 v_normal;\nvarying vec3 v_surfaceToLight;\nvarying vec3 v_surfaceToView;\n\nvoid main() {\n  v_texCoord = a_texcoord;\n  v_position = (u_worldViewProjection * a_position);\n  v_normal = (u_worldInverseTranspose * vec4(a_normal, 0)).xyz;\n  v_surfaceToLight = u_lightWorldPos - (u_world * a_position).xyz;\n  v_surfaceToView = (u_viewInverse[3] - (u_world * a_position)).xyz;\n  gl_Position = v_position;\n}\n",ln.VERTEX_SHADER),hn=sn.createProgram([dn,pn]),bn=sn.createProgramInfo(hn),mn=[new on(sn,2).bufferInfo],yn=[1,8,-10],gn=[1,1,1,1],vn=un.identity(),En=un.identity(),_n=un.identity(),An=sn.createTexture({min:ln.NEAREST,mag:ln.NEAREST,src:[255,255,255,255,192,192,192,255,192,192,192,255,255,255,255,255]}),Tn=[],xn=[],wn=fn(0,360),Rn=0;Rn<100;Rn++){var Pn={u_lightWorldPos:yn,u_lightColor:gn,u_diffuseMult:an.hsv((wn+fn(0,60))%360,.4,.8).gl(),u_specular:[1,1,1,1],u_shininess:50,u_specularFactor:1,u_diffuse:An,u_viewInverse:vn,u_world:un.identity(),u_worldInverseTranspose:un.identity(),u_worldViewProjection:un.identity()};xn.push({programInfo:bn,bufferInfo:mn[Rn%mn.length],uniforms:Pn}),Tn.push({translation:[fn(-10,10),fn(-10,10),fn(-10,10)],ySpeed:fn(.1,.3),zSpeed:fn(.1,.3),uniforms:Pn})}var Fn=function(e){e*=.001,sn.resizeCanvasToDisplaySize(cn),ln.viewport(0,0,cn.width,cn.height),ln.enable(ln.DEPTH_TEST),ln.clear(ln.COLOR_BUFFER_BIT|ln.DEPTH_BUFFER_BIT);var t=un.perspective(30*Math.PI/180,cn.clientWidth/cn.clientHeight,.5,100);un.lookAt([1,4,-20],[0,0,0],[0,1,0],vn),un.inverse(vn,En),un.multiply(t,En,_n),Tn.forEach((function(t){var r=t.uniforms,n=r.u_world;un.identity(n),un.rotateY(n,e*t.ySpeed,n),un.rotateZ(n,e*t.zSpeed,n),un.translate(n,t.translation,n),un.rotateX(n,e,n),un.transpose(un.inverse(n,r.u_worldInverseTranspose),r.u_worldInverseTranspose),un.multiply(_n,r.u_world,r.u_worldViewProjection)})),sn.drawObjects(xn),window.requestAnimationFrame(Fn)};window.requestAnimationFrame(Fn)}]);